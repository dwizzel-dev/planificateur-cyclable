(function(){var a=false,b=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Class=function(){};Class.extend=function(g){var f=this.prototype;a=true;var e=new this();a=false;for(var d in g){e[d]=typeof g[d]=="function"&&typeof f[d]=="function"&&b.test(g[d])?(function(h,j){return function(){var l=this._super;this._super=f[h];var k=j.apply(this,arguments);this._super=l;return k}})(d,g[d]):g[d]}function c(){if(!a&&this.init){this.init.apply(this,arguments)}}c.prototype=e;c.constructor=c;c.extend=arguments.callee;return c}})();DateInput=(function(a){function b(e,c){if(typeof(opts)!="object"){c={}}a.extend(this,b.DEFAULT_OPTS,c);var d=a('<span class="jFormComponentDateButton">Find Date</span>');this.input=a(e);this.input.after(d);this.button=a(e).parent().find("span.jFormComponentDateButton");this.bindMethodsToObj("show","hide","hideIfClickOutside","keydownHandler","selectDate");this.build();this.selectDate();this.hide()}b.DEFAULT_OPTS={jFormComponentDateSelectorMonthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],short_jFormComponentDateSelectorMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],short_day_names:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],start_of_week:0};b.prototype={build:function(){var c=a('<p class="jFormComponentDateSelectorMonthNavigator"><span class="jFormComponentDateSelectorButton jFormComponentDateSelectorPrevious" title="[Page-Up]">&#171;</span> <span class="jFormComponentDateSelectorMonthName"></span> <span class="jFormComponentDateSelectorButton jFormComponentDateSelectorNext" title="[Page-Down]">&#187;</span></p>');this.monthNameSpan=a(".jFormComponentDateSelectorMonthName",c);a(".jFormComponentDateSelectorPrevious",c).click(this.bindToObj(function(){this.moveMonthBy(-1)}));a(".jFormComponentDateSelectorNext",c).click(this.bindToObj(function(){this.moveMonthBy(1)}));var d=a('<p class="jFormComponentDateSelectorYearNavigator"><span class="jFormComponentDateSelectorButton jFormComponentDateSelectorPrevious" title="[Ctrl+Page-Up]">&#171;</span> <span class="jFormComponentDateSelectorYearName"></span> <span class="jFormComponentDateSelectorButton jFormComponentDateSelectorNext" title="[Ctrl+Page-Down]">&#187;</span></p>');this.yearNameSpan=a(".jFormComponentDateSelectorYearName",d);a(".jFormComponentDateSelectorPrevious",d).click(this.bindToObj(function(){this.moveMonthBy(-12)}));a(".jFormComponentDateSelectorNext",d).click(this.bindToObj(function(){this.moveMonthBy(12)}));var e=a('<div class="jFormComponentDateSelectorNavigator"></div>').append(c,d);var f="<table><thead><tr>";a(this.adjustDays(this.short_day_names)).each(function(){f+="<th>"+this+"</th>"});f+="</tr></thead><tbody></tbody></table>";this.dateSelector=this.rootLayers=a('<div class="jFormComponentDateSelector"></div>').append(e,f).insertAfter(this.input);if(a.browser.msie&&a.browser.version<7){this.ieframe=a('<iframe class="jFormComponentDateSelectorIEFrame" frameborder="0" src="#"></iframe>').insertBefore(this.dateSelector);this.rootLayers=this.rootLayers.add(this.ieframe);a(".jFormComponentDateSelectorButton",e).mouseover(function(){a(this).addClass("hover")});a(".jFormComponentDateSelectorButton",e).mouseout(function(){a(this).removeClass("hover")})}this.tbody=a("tbody",this.dateSelector);this.input.change(this.bindToObj(function(){this.selectDate()}));this.selectDate()},selectMonth:function(d){var k=new Date(d.getFullYear(),d.getMonth(),1);if(!this.currentMonth||!(this.currentMonth.getFullYear()==k.getFullYear()&&this.currentMonth.getMonth()==k.getMonth())){this.currentMonth=k;var j=this.rangeStart(d),h=this.rangeEnd(d);var c=this.daysBetween(j,h);var f="";for(var e=0;e<=c;e++){var g=new Date(j.getFullYear(),j.getMonth(),j.getDate()+e,12,0);if(this.isFirstDayOfWeek(g)){f+="<tr>"}if(g.getMonth()==d.getMonth()){f+='<td class="jFormComponentDateSelectorSelectedDay" date="'+this.dateToString(g)+'">'+g.getDate()+"</td>"}else{f+='<td class="jFormComponentDateSelectorUnselectedMonth" date="'+this.dateToString(g)+'">'+g.getDate()+"</td>"}if(this.isLastDayOfWeek(g)){f+="</tr>"}}this.tbody.empty().append(f);this.monthNameSpan.empty().append(this.monthName(d));this.yearNameSpan.empty().append(this.currentMonth.getFullYear());a(".jFormComponentDateSelectorSelectedDay",this.tbody).click(this.bindToObj(function(l){this.changeInput(a(l.target).attr("date"))}));a("td[date='"+this.dateToString(new Date())+"']",this.tbody).addClass("jFormComponentDateSelectorToday");a("td.jFormComponentDateSelectorSelectedDay",this.tbody).mouseover(function(){a(this).addClass("hover")});a("td.jFormComponentDateSelectorSelectedDay",this.tbody).mouseout(function(){a(this).removeClass("hover")})}a(".jFormComponentDateSelectorSelected",this.tbody).removeClass("jFormComponentDateSelectorSelected");a('td[date="'+this.selectedDateString+'"]',this.tbody).addClass("jFormComponentDateSelectorSelected")},selectDate:function(c){if(typeof(c)=="undefined"){c=this.stringToDate(this.input.val())}if(!c){c=new Date()}this.selectedDate=c;this.selectedDateString=this.dateToString(this.selectedDate);this.selectMonth(this.selectedDate)},changeInput:function(c){this.input.val(c).change();this.hide()},show:function(){this.rootLayers.css("display","block");this.button.unbind("click",this.show);this.input.unbind("focus",this.show);a(document.body).keydown(this.keydownHandler);a([window,document.body]).click(this.hideIfClickOutside);this.setPosition()},hide:function(){this.rootLayers.css("display","none");a([window,document.body]).unbind("click",this.hideIfClickOutside);this.button.click(this.show);this.input.focus(this.show);a(document.body).unbind("keydown",this.keydownHandler)},hideIfClickOutside:function(c){if(c.target!=this.input[0]&&c.target!=this.button[0]&&!this.insideSelector(c)){this.hide()}},insideSelector:function(c){var d=this.dateSelector.offset();d.right=d.left+this.dateSelector.outerWidth();d.bottom=d.top+this.dateSelector.outerHeight();return c.pageY<d.bottom&&c.pageY>d.top&&c.pageX<d.right&&c.pageX>d.left},keydownHandler:function(c){switch(c.keyCode){case 9:case 27:this.hide();return;break;case 13:this.changeInput(this.selectedDateString);break;case 33:this.moveDateMonthBy(c.ctrlKey?-12:-1);break;case 34:this.moveDateMonthBy(c.ctrlKey?12:1);break;case 38:this.moveDateBy(-7);break;case 40:this.moveDateBy(7);break;case 37:this.moveDateBy(-1);break;case 39:this.moveDateBy(1);break;default:return}c.preventDefault()},stringToDate:function(c){c=c.replace(/[^\d]/g,"/");if(c.match(/^(\d{1,2})\/(\d{1,2})\/(\d{4,4})$/)){return new Date(c)}else{return null}},dateToString:function(c){return d(c.getMonth()+1)+"/"+d(c.getDate())+"/"+c.getFullYear();function d(e){e=""+e;if(e.length==1){e="0"+e}return e}},setPosition:function(){var e=this.button.position();this.rootLayers.css({top:e.top,left:e.left+this.button.outerWidth()+4});if(this.ieframe){this.ieframe.css({width:this.dateSelector.outerWidth(),height:this.dateSelector.outerHeight()})}var c=e.top+this.dateSelector.outerHeight()+12;var d="";if(jFormerUtility.isSet(window.scrollY)){d=window.scrollY}else{d=document.documentElement.scrollTop}if(d+a(window).height()>c){}else{a.scrollTo(c-a(window).height()+"px",250,{axis:"y"})}},moveDateBy:function(d){var c=new Date(this.selectedDate.getFullYear(),this.selectedDate.getMonth(),this.selectedDate.getDate()+d);this.selectDate(c)},moveDateMonthBy:function(d){var c=new Date(this.selectedDate.getFullYear(),this.selectedDate.getMonth()+d,this.selectedDate.getDate());if(c.getMonth()==this.selectedDate.getMonth()+d+1){c.setDate(0)}this.selectDate(c)},moveMonthBy:function(c){var d=new Date(this.currentMonth.getFullYear(),this.currentMonth.getMonth()+c,this.currentMonth.getDate());this.selectMonth(d)},monthName:function(c){return this.jFormComponentDateSelectorMonthNames[c.getMonth()]},bindToObj:function(d){var c=this;return function(){return d.apply(c,arguments)}},bindMethodsToObj:function(){for(var c=0;c<arguments.length;c++){this[arguments[c]]=this.bindToObj(this[arguments[c]])}},indexFor:function(e,d){for(var c=0;c<e.length;c++){if(d==e[c]){return c}}},monthNum:function(c){return this.indexFor(this.jFormComponentDateSelectorMonthNames,c)},shortMonthNum:function(c){return this.indexFor(this.short_jFormComponentDateSelectorMonthNames,c)},shortDayNum:function(c){return this.indexFor(this.short_day_names,c)},daysBetween:function(d,c){d=Date.UTC(d.getFullYear(),d.getMonth(),d.getDate());c=Date.UTC(c.getFullYear(),c.getMonth(),c.getDate());return(c-d)/86400000},changeDayTo:function(c,d,e){var f=e*(Math.abs(d.getDay()-c-(e*7))%7);return new Date(d.getFullYear(),d.getMonth(),d.getDate()+f)},rangeStart:function(c){return this.changeDayTo(this.start_of_week,new Date(c.getFullYear(),c.getMonth()),-1)},rangeEnd:function(c){return this.changeDayTo((this.start_of_week-1)%7,new Date(c.getFullYear(),c.getMonth()+1,0),1)},isFirstDayOfWeek:function(c){return c.getDay()==this.start_of_week},isLastDayOfWeek:function(c){return c.getDay()==(this.start_of_week-1)%7},adjustDays:function(e){var d=[];for(var c=0;c<e.length;c++){d[c]=e[(c+this.start_of_week)%7]}return d}};a.fn.date_input=function(c){return this.each(function(){new b(this,c)})};a.date_input={initialize:function(c){a("input.date_input").date_input(c)}};return b})(jQuery);(function(c){var a=(c.browser.msie?"paste":"input")+".mask";var b=(window.orientation!=undefined);c.mask={definitions:{"9":"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"}};c.fn.extend({caret:function(f,d){if(this.length==0){return}if(typeof f=="number"){d=(typeof d=="number")?d:f;return this.each(function(){if(this.setSelectionRange){this.focus();this.setSelectionRange(f,d)}else{if(this.createTextRange){var g=this.createTextRange();g.collapse(true);g.moveEnd("character",d);g.moveStart("character",f);g.select()}}})}else{if(this[0].setSelectionRange){f=this[0].selectionStart;d=this[0].selectionEnd}else{if(document.selection&&document.selection.createRange){var e=document.selection.createRange();f=0-e.duplicate().moveStart("character",-100000);d=f+e.text.length}}return{begin:f,end:d}}},unmask:function(){return this.trigger("unmask")},mask:function(f,k){if(!f&&this.length>0){var g=c(this[0]);var j=g.data("tests");return c.map(g.data("buffer"),function(n,m){return j[m]?n:null}).join("")}k=c.extend({placeholder:"_",completed:null},k);var e=c.mask.definitions;var j=[];var l=f.length;var h=null;var d=f.length;c.each(f.split(""),function(m,n){if(n=="?"){d--;l=m}else{if(e[n]){j.push(new RegExp(e[n]));if(h==null){h=j.length-1}}else{j.push(null)}}});return this.each(function(){var v=c(this);var q=c.map(f.split(""),function(z,y){if(z!="?"){return e[z]?k.placeholder:z}});var t=false;var x=v.val();v.data("buffer",q).data("tests",j);function u(y){while(++y<=d&&!j[y]){}return y}function p(A){while(!j[A]&&--A>=0){}for(var z=A;z<d;z++){if(j[z]){q[z]=k.placeholder;var y=u(z);if(y<d&&j[z].test(q[y])){q[z]=q[y]}else{break}}}s();v.caret(Math.max(h,A))}function m(C){for(var A=C,B=k.placeholder;A<d;A++){if(j[A]){var y=u(A);var z=q[A];q[A]=B;if(y<d&&j[y].test(z)){B=z}else{break}}}}function r(A){var C=c(this).caret();var y=A.keyCode;t=(y<16||(y>16&&y<32)||(y>32&&y<41));if(!A.shiftKey){if(y==36){A.preventDefault();c(this).caret(u(0))}if(y==35){A.preventDefault();var z=v.val().indexOf(" ");var B=v.val().length;while(j[z]==null||v.val().charAt(z)!=" "){z=z+1;if(z==B){break}}c(this).caret(z);return false}}if((C.begin-C.end)!=0&&(!t||y==8||y==46)){n(C.begin,C.end)}if(y==8||y==46||(b&&y==127)){p(C.begin+(y==46?0:-1));return false}else{if(y==27){v.val(x);v.caret(0,o());return false}}}function w(B){if(t){t=false;return(B.keyCode==8)?false:null}B=B||window.event;var y=B.charCode||B.keyCode||B.which;var D=c(this).caret();if(B.ctrlKey||B.altKey||B.metaKey){return true}else{if((y>=32&&y<=125)||y>186){var A=u(D.begin-1);if(A<d){var C=String.fromCharCode(y);if(j[A].test(C)){m(A);q[A]=C;s();var z=u(A);c(this).caret(z);if(k.completed&&z==d){k.completed.call(v)}}}}}return false}function n(A,y){for(var z=A;z<y&&z<d;z++){if(j[z]){q[z]=k.placeholder}}}function s(){return v.val(q.join("")).val()}function o(z){var D=v.val();var C=-1;for(var y=0,B=0;y<d;y++){if(j[y]){q[y]=k.placeholder;while(B++<D.length){var A=D.charAt(B-1);if(j[y].test(A)){q[y]=A;C=y;break}}if(B>D.length){break}}else{if(q[y]==D[B]&&y!=l){B++;C=y}}}if(!z&&C+1<l){v.val("");n(0,d)}else{if(z||C+1>=l){s();if(!z){v.val(v.val().substring(0,C+1))}}}return(l?y:h)}if(!v.attr("readonly")){v.one("unmask",function(){v.unbind(".mask").removeData("buffer").removeData("tests")}).bind("focus.mask",function(){x=v.val();var y=o();s();setTimeout(function(){if(y==f.length){v.caret(0,y)}else{v.caret(y)}},0)}).bind("blur.mask",function(){o();if(v.val()!=x){v.change()}}).bind("keydown.mask",r).bind("keypress.mask",w).bind(a,function(){setTimeout(function(){v.caret(o(true))},0)})}o()})}})})(jQuery);(function(b){var a=b.scrollTo=function(d,e,g){b(window).scrollTo(d,e,g)};a.defaults={axis:"y",duration:parseFloat(b.fn.jquery)>=1.3?0:1};a.window=function(d){return b(window).scrollable()};b.fn.scrollable=function(){return this.map(function(){var d=this,e=!d.nodeName||b.inArray(d.nodeName.toLowerCase(),["iframe","#document","html","body"])!=-1;if(!e){return d}var g=(d.contentWindow||d).document||d.ownerDocument||d;return b.browser.safari||g.compatMode=="BackCompat"?g.body:g.documentElement})};b.fn.scrollTo=function(e,f,d){if(typeof f=="object"){d=f;f=0}if(typeof d=="function"){d={onAfter:d}}if(e=="max"){e=9000000000}d=b.extend({},a.defaults,d);f=f||d.speed||d.duration;d.queue=d.queue&&d.axis.length>1;if(d.queue){f/=2}d.offset=c(d.offset);d.over=c(d.over);return this.scrollable().each(function(){var h=this,v=b(h),s=e,r,m={},n=v.is("html,body");switch(typeof s){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px)?$/.test(s)){s=c(s);break}s=b(s,this);case"object":if(s.is||s.style){r=(s=b(s)).offset()}}b.each(d.axis.split(""),function(g,p){var t=p=="x"?"Left":"Top",k=t.toLowerCase(),u="scroll"+t,q=h[u],o=p=="x"?"Width":"Height";if(r){m[u]=r[k]+(n?0:q-v.offset()[k]);if(d.margin){m[u]-=parseInt(s.css("margin"+t))||0;m[u]-=parseInt(s.css("border"+t+"Width"))||0}m[u]+=d.offset[k]||0;if(d.over[k]){m[u]+=s[o.toLowerCase()]()*d.over[k]}}else{m[u]=s[k]}if(/^\d+$/.test(m[u])){m[u]=m[u]<=0?0:Math.min(m[u],j(o))}if(!g&&d.queue){if(q!=m[u]){l(d.onAfterFirst)}delete m[u]}});l(d.onAfter);function l(g){v.animate(m,f,d.easing,g&&function(){g.call(this,e,d)})}function j(g){var o="scroll"+g;if(!n){return h[o]}var p="client"+g,k=h.ownerDocument.documentElement,q=h.ownerDocument.body;return Math.max(k[o],q[o])-Math.min(k[p],q[p])}}).end()};function c(d){return typeof d=="object"?d:{top:d,left:d}}})(jQuery);(function(d){var a=location.href.replace(/#.*/,"");var c=d.localScroll=function(e){d("body").localScroll(e)};c.defaults={duration:1000,axis:"y",event:"click",stop:true,target:window,reset:true};c.hash=function(f){if(location.hash){f=d.extend({},c.defaults,f);f.hash=false;if(f.reset){var g=f.duration;delete f.duration;d(f.target).scrollTo(0,f);f.duration=g}b(0,location,f)}};d.fn.localScroll=function(e){e=d.extend({},c.defaults,e);return e.lazy?this.bind(e.event,function(g){var h=d([g.target,g.target.parentNode]).filter(f)[0];if(h){b(g,h,e)}}):this.find("a,area").filter(f).bind(e.event,function(g){b(g,this,e)}).end().end();function f(){return !!this.href&&!!this.hash&&this.href.replace(this.hash,"")==a&&(!e.filter||d(this).is(e.filter))}};function b(l,q,g){var r=q.hash.slice(1),p=document.getElementById(r)||document.getElementsByName(r)[0];if(!p){return}if(l){l.preventDefault()}var o=d(g.target);if(g.lock&&o.is(":animated")||g.onBefore&&g.onBefore.call(g,l,p,o)===false){return}if(g.stop){o.stop(true)}if(g.hash){var n=p.id==r?"id":"name",m=d("<a> </a>").attr(n,r).css({position:"absolute",top:d(window).scrollTop(),left:d(window).scrollLeft()});p[n]="";d("body").prepend(m);location=q.hash;m.remove();p[n]=r}o.scrollTo(p,g).trigger("notify.serialScroll",[p])}})(jQuery);(function(f){var e="serialScroll",d="."+e,h="bind",g=f[e]=function(a){f.scrollTo.window()[e](a)};g.defaults={duration:1000,axis:"x",event:"click",start:0,step:1,lock:1,cycle:1,constant:1};f.fn[e]=function(j){j=f.extend({},g.defaults,j);var b=j.event,a=j.step,c=j.lazy;return this.each(function(){var E=j.target?this:document,D=f(j.target||this,E),C=D[0],B=j.items,A=j.start,z=j.interval,y=j.navigation,n;if(!c){B=G()}if(j.force){J({},A)}f(j.prev||[],E)[h](b,-a,K);f(j.next||[],E)[h](b,a,K);if(!C.ssbound){D[h]("prev"+d,-a,K)[h]("next"+d,a,K)[h]("goto"+d,J)}if(z){D[h]("start"+d,function(k){if(!z){H();z=1;I()}})[h]("stop"+d,function(){H();z=0})}D[h]("notify"+d,function(m,k){var l=F(k);if(l>-1){A=l}});C.ssbound=1;if(j.jump){(c?D:G())[h](b,function(k){J(k,F(k.target))})}if(y){y=f(y,E)[h](b,function(k){k.data=Math.round(G().length/y.length)*y.index(this);J(k,this)})}function K(k){k.data+=A;J(k,this)}function J(q,t){if(!isNaN(t)){q.data=t;t=C}var s=q.data,k,r=q.type,p=j.exclude?G().slice(0,-j.exclude):G(),o=p.length,m=p[s],l=j.duration;if(r){q.preventDefault()}if(z){H();n=setTimeout(I,j.interval)}if(!m){k=s<0?0:k=o-1;if(A!=k){s=k}else{if(!j.cycle){return}else{s=o-k-1}}m=p[s]}if(!m||r&&A==s||j.lock&&D.is(":animated")||r&&j.onBefore&&j.onBefore.call(t,q,m,D,G(),s)===!1){return}if(j.stop){D.queue("fx",[]).stop()}if(j.constant){l=Math.abs(l/a*(A-s))}D.scrollTo(m,l,j).trigger("notify"+d,[s])}function I(){D.trigger("next"+d)}function H(){clearTimeout(n)}function G(){return f(B,C)}function F(l){if(!isNaN(l)){return l}var k=G(),m;while((m=k.index(l))==-1&&l!=C){l=l.parentNode}return m}})}})(jQuery);(function(b){function a(e,d){var c=this;e=jQuery(e);var g=['<span class="tipArrow"></span><div class="tipContent">',d.content.html(),"</div>"].join("");var f=jQuery(d.content).addClass(d.baseClass).addClass((d.fixed)?d.fixedClass:"").addClass((d.persistent)?d.persistentClass:"").html(g);jQuery(window).resize(function(){if(f.is(":visible")){c.updatePos()}});if(!d.hidden){f.show()}else{f.hide()}if(!d.persistent){e.hover(function(h){c.show(h)},function(){c.hide()});if(!d.fixed){e.mousemove(function(h){if(f.css("display")!=="none"){c.updatePos(h)}})}}else{e.click(function(h){if(h.target===e.get(0)){}});jQuery(window).mousedown(function(j){if(f.css("display")!=="none"){var h=(d.focus)?jQuery(j.target).parents(".tooltip").andSelf().filter(function(){return this===f.get(0)}).length:0}})}jQuery.extend(c,{getVersion:function(){return[1,2,0]},getParent:function(){return e},getTooltip:function(){return f},getPos:function(){return f.position()},setPos:function(k,j){var h=e.position();if(typeof k=="string"){k=parseInt(k)+h.left}if(typeof j=="string"){j=parseInt(j)+h.top}f.css({left:k,top:j});return c},show:function(j){var h=d.onBeforeShow();if(h===false){return false}c.updatePos((d.fixed)?null:j);switch(d.showEffect){case"fade":f.fadeIn(d.showTime);break;case"slide":f.slideDown(d.showTime,c.updatePos);break;case"custom":d.showCustom.call(f,d.showTime);break;default:case"none":f.show();break}f.addClass(d.activeClass);d.onShow.call(c);jQuery(document).trigger("blurTip",[f,"show"]);return c},hide:function(){d.onBeforeHide.call(c);switch(d.hideEffect){case"fade":f.fadeOut(d.hideTime);break;case"slide":f.slideUp(d.hideTime);break;case"custom":d.hideCustom.call(f,d.hideTime);break;default:case"none":f.hide();break}f.removeClass(d.activeClass);d.onHide.call(c);jQuery(document).trigger("blurTip",[f,"hide"]);return c},update:function(h){return c},load:function(h,j){d.beforeContentLoad.call(c);f.load(h,j,function(){d.onContentLoad.call(c)});return c},boundryCheck:function(n,l){var k=n+f.outerWidth();var j=l+f.outerHeight();var h=jQuery(window).width()+jQuery(window).scrollLeft();var m=jQuery(window).height()+jQuery(window).scrollTop();return[(k>=h),(j>=m)]},updatePos:function(k){var p=f.outerWidth();var r=f.outerHeight();if(!k&&d.fixed){if(d.position.constructor==Array){j=parseInt(d.position[0]);h=parseInt(d.position[1])}else{if(jQuery(d.position).attr("nodeType")===1){var o=jQuery(d.position).position();j=o.left;h=o.top}else{var q=e.position();var n=e.outerWidth();var l=e.outerHeight();var j="";var h="";switch(d.position){case"top":j=q.left-(p/2)+(n/2);h=q.top-r;break;case"bottom":j=q.left-(p/2)+(n/2);h=q.top+l;break;case"left":j=q.left-p;h=q.top-(r/2)+(l/2);break;case"right":j=q.left+n;h=q.top-(r/2)+(l/2);break;case"topRight":j=q.left+n;h=q.top;break;default:case"default":j=(n/2)+q.left+20;h=q.top;break}}}}else{var j=k.pageX;var h=k.pageY}if(typeof d.position!="object"){j=j+d.offset[0];h=h+d.offset[1];if(d.boundryCheck){var m=c.boundryCheck(j,h);if(m[0]){j=j-(p/2)-(2*d.offset[0])}if(m[1]){h=h-(r/2)-(2*d.offset[1])}}}else{if(typeof d.position[0]=="string"){j=String(j)}if(typeof d.position[1]=="string"){h=String(h)}}c.setPos(j,h);return c}})}jQuery.fn.simpletip=function(c){var d=jQuery(this).eq(typeof c=="number"?c:0).data("simpletip");if(d){return d}var e={content:"A simple tooltip",persistent:false,focus:false,hidden:true,position:"default",offset:[0,0],boundryCheck:false,fixed:true,showEffect:"fade",showTime:150,showCustom:null,hideEffect:"fade",hideTime:150,hideCustom:null,baseClass:"tooltip",activeClass:"active",fixedClass:"fixed",persistentClass:"persistent",focusClass:"focus",onBeforeShow:function(){return true},onShow:function(){},onBeforeHide:function(){},onHide:function(){},beforeContentLoad:function(){},onContentLoad:function(){}};jQuery.extend(e,c);this.each(function(){var f=new a(jQuery(this),e);jQuery(this).data("simpletip",f)});return this}})();JFormer=Class.extend({init:function(c,b){this.initializing=true;this.options=$.extend(true,{animationOptions:{pageScroll:{duration:375,adjustHeightDuration:375},instance:{appearDuration:0,appearEffect:"fade",removeDuration:0,removeEffect:"fade",adjustHeightDuration:0},dependency:{appearDuration:250,appearEffect:"fade",hideDuration:100,hideEffect:"fade",adjustHeightDuration:100},alert:{appearDuration:250,appearEffect:"fade",hideDuration:100,hideEffect:"fade"},modal:{appearDuration:0,hideDuration:0}},trackBind:false,disableAnalytics:false,setupPageScroller:true,validationTips:true,pageNavigator:false,saveState:false,splashPage:false,progressBar:false,alertsEnabled:true,clientSideValidation:true,debugMode:false,submitButtonText:"Submit",submitProcessingButtonText:"Processing...",onSubmitStart:function(){return true},onSubmitFinish:function(){return true}},b.options||{});if(this.options.trackBind){jQuery.fn.bind=function(d){return function(){console.count("jQuery Bind Count");console.log("jQuery Bind %o",arguments[0],this);return d.apply(this,arguments)}}(jQuery.fn.bind)}this.id=c;this.form=$(["form#",this.id].join(""));this.formData={};this.jFormPageWrapper=this.form.find("div.jFormPageWrapper");this.jFormPageScroller=this.form.find("div.jFormPageScroller");this.jFormPageNavigator=null;this.jFormPages={};this.currentJFormPage=null;this.maxJFormPageIdArrayIndexReached=null;this.jFormPageIdArray=[];this.currentJFormPageIdArrayIndex=null;this.blurredTips=[];this.lastEnabledPage=false;this.initializationTime=(new Date().getTime())/1000;this.durationInSeconds=0;this.jFormComponentCount=0;this.control=this.form.find("ul.jFormerControl");this.controlNextLi=this.form.find("ul.jFormerControl li.nextLi");this.controlNextButton=this.controlNextLi.find("button.nextButton");this.controlPreviousLi=this.form.find("ul.jFormerControl li.previousLi");this.controlPreviousButton=this.controlPreviousLi.find("button.previousButton");this.saveIntervalSetTimeoutId=null;this.initPages(b.jFormPages);if(this.options.splashPage!==false||this.options.saveState!==false){if(this.options.splashPage==false){this.options.splashPage={}}this.addSplashPage()}else{this.currentJFormPageIdArrayIndex=0;this.maxJFormPageIdArrayIndexReached=0;this.currentJFormPage=this.jFormPages[this.jFormPageIdArray[0]];this.currentJFormPage.active=true;this.currentJFormPage.startTime=(new Date().getTime()/1000);if(this.options.pageNavigator!==false){this.addPageNavigator()}}if(this.options.setupPageScroller){this.setupPageScroller()}this.hideInactivePages();this.setupControl();this.addSubmitListener();this.addEnterKeyListener();this.addBlurTipListener();this.checkDependencies(true);this.initializing=false;var a=this;$(window).load(function(){a.adjustHeight()})},initPages:function(d){var a=this;var c=$.each;var b={};c(d,function(g,f){var e=new JFormPage(a,g,f.options);e.show();if(e.options.dependencyOptions!==null){$.each(e.options.dependencyOptions.dependentOn,function(j,h){if(b[h]===undefined){b[h]={pages:[],sections:[],components:[]}}b[h].pages.push({jFormPageId:g})})}c(f.jFormSections,function(j,h){var k=new JFormSection(e,j,h.options);if(k.options.dependencyOptions!==null){$.each(k.options.dependencyOptions.dependentOn,function(m,l){if(b[l]===undefined){b[l]={pages:[],sections:[],components:[]}}b[l].sections.push({jFormPageId:g,jFormSectionId:j})})}c(h.jFormComponents,function(l,m){a.jFormComponentCount=a.jFormComponentCount+1;var n=new window[m.type](k,l,m.type,m.options);k.addComponent(n);if(n.options.dependencyOptions!==null){$.each(n.options.dependencyOptions.dependentOn,function(p,o){if(b[o]===undefined){b[o]={pages:[],sections:[],components:[]}}b[o].components.push({jFormPageId:g,jFormSectionId:j,jFormComponentId:l})})}});e.addSection(k)});a.addJFormPage(e)});$.each(b,function(g,f){$("#"+g+":text, textarea#"+g).bind("keyup",function(h){$.each(f.pages,function(k,j){a.jFormPages[j.jFormPageId].checkDependencies()});$.each(f.sections,function(k,j){a.jFormPages[j.jFormPageId].jFormSections[j.jFormSectionId].checkDependencies()});$.each(f.components,function(k,j){a.jFormPages[j.jFormPageId].jFormSections[j.jFormSectionId].jFormComponents[j.jFormComponentId].checkDependencies()})});$("#"+g+"-wrapper").bind("jFormComponent:changed",function(h){$.each(f.pages,function(k,j){a.jFormPages[j.jFormPageId].checkDependencies()});$.each(f.sections,function(k,j){a.jFormPages[j.jFormPageId].jFormSections[j.jFormSectionId].checkDependencies()});$.each(f.components,function(k,j){a.jFormPages[j.jFormPageId].jFormSections[j.jFormSectionId].jFormComponents[j.jFormComponentId].checkDependencies()})});var e=a.select(g);if(e!==null&&e.options.instanceOptions!==null){e.options.dependencies=f}})},select:function(c){var b=false,a=null;$.each(this.jFormPages,function(e,d){$.each(d.jFormSections,function(g,f){$.each(f.jFormComponents,function(j,h){if(h.id==c){a=h;b=true}return !b});return !b});return !b});return a},checkDependencies:function(a){$.each(this.jFormPages,function(c,b){b.checkDependencies();$.each(b.jFormSections,function(d,e){e.checkDependencies();$.each(e.jFormComponents,function(f,g){g.checkDependencies()})})})},addSplashPage:function(){var a=this;this.options.splashPage.jFormPage=new JFormPage(this,this.form.find("div.jFormerSplashPage").attr("id"));this.options.splashPage.jFormPage.addSection(new JFormSection(this.options.splashPage.jFormPage,this.form.find("div.jFormerSplashPage").attr("id")+"-section"));this.options.splashPage.jFormPage.page.width(this.form.width());this.options.splashPage.jFormPage.active=true;this.options.splashPage.jFormPage.startTime=(new Date().getTime()/1000);this.currentJFormPage=this.options.splashPage.jFormPage;this.jFormPageWrapper.height(this.options.splashPage.jFormPage.page.outerHeight());if(this.options.splashPage.customButtonId){this.options.splashPage.controlSplashLi=this.form.find("#"+this.options.splashPage.customButtonId);this.options.splashPage.controlSplashButton=this.form.find("#"+this.options.splashPage.customButtonId)}else{this.options.splashPage.controlSplashLi=this.form.find("li.splashLi");this.options.splashPage.controlSplashButton=this.form.find("button.splashButton")}this.setupControl();if(this.options.saveState!==false){a.addSaveStateToSplashPage()}else{this.options.splashPage.controlSplashButton.bind("click",function(b){b.preventDefault();a.beginFormFromSplashPage(false)})}},beginFormFromSplashPage:function(c,d){var b=this;if(this.options.pageNavigator!==false&&this.jFormPageNavigator==null){this.addPageNavigator();this.jFormPageNavigator.show()}else{if(this.options.pageNavigator!==false){this.jFormPageNavigator.show()}}var a=this.form.find(".jFormPage");a.css("width",this.form.find(".jFormWrapperContainer").width());b.options.splashPage.jFormPage.active=false;if(!d){b.currentJFormPageIdArrayIndex=0;b.jFormPages[b.jFormPageIdArray[0]].scrollTo({onAfter:function(){b.options.splashPage.jFormPage.hide();b.renumberPageNavigator()}})}if(c){b.initSaveState()}},addSaveStateToSplashPage:function(){var self=this;var sectionId=self.options.splashPage.jFormPage.id+"-section";$.each(self.options.saveState.components,function(jFormComponentId,jFormComponentOptions){self.options.splashPage.jFormPage.jFormSections[sectionId].addComponent(new window[jFormComponentOptions.type](self.options.splashPage.jFormPage.jFormSections[sectionId],jFormComponentId,jFormComponentOptions.type,jFormComponentOptions.options))});var formState="newForm";var saveStateJFormComponents=this.options.splashPage.jFormPage.jFormSections[sectionId].jFormComponents;saveStateJFormComponents.saveStateStatus.component.find("input:option").bind("click",{context:this},function(event){self.form.find("li.jFormerFailureNotice").remove();formState=$(event.target).val();if(formState=="newForm"){saveStateJFormComponents.saveStatePassword.component.find("label").html('Create password: <span class="jFormComponentLabelRequiredStar"> *</span>');self.options.splashPage.controlSplashButton.text("Begin")}else{if(formState=="resumeForm"){saveStateJFormComponents.saveStatePassword.component.find("label").html('Form password: <span class="jFormComponentLabelRequiredStar"> *</span>');self.options.splashPage.controlSplashButton.text("Resume")}}});self.options.splashPage.controlSplashButton.bind("click",{context:this},function(event){event.preventDefault();self.form.find("li.jFormerFailureNotice").remove();var validateSaveStateIdentifier=saveStateJFormComponents.saveStateIdentifier.validate();var validateSaveStatePassword=saveStateJFormComponents.saveStatePassword.validate();if(validateSaveStateIdentifier&&validateSaveStatePassword){if(formState=="newForm"){self.options.splashPage.controlSplashButton.text("Creating form...");var formJson={};formJson.meta={};formJson.meta.totalTime=0;formJson.meta.currentPage=self.getActivePage().id;formJson.meta.maxPageIndex=self.maxJFormPageIdArrayIndexReached;formJson.form={}}else{self.options.splashPage.controlSplashButton.text("Loading form...")}$(event.target).attr("disabled","disabled");$.ajax({url:self.form.attr("action"),type:"post",data:{jFormerTask:"initializeSaveState",identifier:saveStateJFormComponents.saveStateIdentifier.getValue(),password:saveStateJFormComponents.saveStatePassword.getValue(),formState:formState,formData:jFormerUtility.jsonEncode(formJson)},dataType:"json",success:function(json){if(json.status=="success"){if(formState=="newForm"){self.beginFormFromSplashPage(true,false)}else{if(formState=="resumeForm"){self.beginFormFromSplashPage(true,true);self.durationInSeconds=json.response.meta.totalTime;self.setData(json.response.form);self.maxJFormPageIdArrayIndexReached=json.response.meta.maxPageIndex;if(self.options.pageNavigator!=null){self.updatePageNavigator()}if(self.jFormPages[json.response.meta.currentPage]==undefined){json.response.meta.currentPage=self.jFormPages[self.jFormPageIdArray[0]].id}if(self.jFormPages[json.response.meta.currentPage].active===false){self.currentJFormPageIdArrayIndex=$.inArray(json.response.meta.currentPage,self.jFormPageIdArray);self.jFormPages[json.response.meta.currentPage].scrollTo({onAfter:function(){self.options.splashPage.jFormPage.hide()}})}}}}else{if(json.status=="exists"){if(formState=="newForm"){self.options.splashPage.controlSplashButton.text("Begin")}else{self.options.splashPage.controlSplashButton.text("Resume")}if(json.response.failureNoticeHtml){self.control.append($('<li class="jFormerFailureNotice jFormComponentValidationFailed">'+json.response.failureNoticeHtml+"</li>"))}$(event.target).removeAttr("disabled")}else{if(json.status=="failure"){if(formState=="newForm"){self.options.splashPage.controlSplashButton.text("Begin")}else{self.options.splashPage.controlSplashButton.text("Resume")}if(json.response.failureNoticeHtml){self.control.append($(['<li class="jFormerFailureNotice jFormComponentValidationFailed">',json.response.failureNoticeHtml,"</li>"].join("")))}if(json.response.failureJs){eval(json.response.failureJs)}$(event.target).removeAttr("disabled")}}}},error:function(XMLHttpRequest,textStatus,errorThrown){self.showAlert("There was a problem initializing the form.");self.setupControl()}})}else{self.options.splashPage.jFormPage.focusOnFirstFailedComponent()}})},addPageNavigator:function(){var a=this;this.jFormPageNavigator=this.form.find(".jFormPageNavigator");this.jFormPageNavigator.find(".jFormPageNavigatorLink:first").click(function(b){if(a.currentJFormPageIdArrayIndex!=0){a.currentJFormPageIdArrayIndex=0;a.scrollToPage(a.jFormPageIdArray[0],{})}});if(this.options.pageNavigator.position=="right"){this.form.find(".jFormWrapperContainer").width(this.form.width()-this.jFormPageNavigator.width()-30)}},updatePageNavigator:function(){var b=this,c,a;for(var d=1;d<=this.maxJFormPageIdArrayIndexReached+1;d++){c=d;var e=$("#navigatePage"+c);if(this.currentJFormPageIdArrayIndex!=c-1){e.removeClass("jFormPageNavigatorLinkActive")}else{e.addClass("jFormPageNavigatorLinkActive")}if(e.hasClass("jFormPageNavigatorLinkLocked")){e.removeClass("jFormPageNavigatorLinkLocked").addClass("jFormPageNavigatorLinkUnlocked");e.click(function(f){var g=$(f.target);if(!g.is("li")){g=g.closest("li")}a=g.attr("id").match(/[0-9]+$/);a=parseInt(a)-1;b.getActivePage().validate(true);if(b.currentJFormPageIdArrayIndex!=a){b.scrollToPage(b.jFormPageIdArray[a])}b.currentJFormPageIdArrayIndex=a})}}},renumberPageNavigator:function(){$(".jFormPageNavigatorLink:visible").each(function(a,b){if($(b).find("span").length>0){$(b).find("span").html(a+1)}else{$(b).html("Page "+(a+1))}})},addJFormPage:function(a){this.jFormPageIdArray.push(a.id);this.jFormPages[a.id]=a},removeJFormPage:function(b){var a=this;$("#"+b).remove();this.jFormPageIdArray=$.grep(a.jFormPageIdArray,function(c){return c!=b});delete this.jFormPages[b]},addEnterKeyListener:function(){var a=this;this.form.bind("keydown",{context:this},function(b){if(b.keyCode===13||b.charCode===13){if($(b.target).is("textarea")){return}b.preventDefault()}});this.form.bind("keyup",{context:this},function(c){var b=a.getActivePage().page;if(c.keyCode===13||c.charCode===13){var d=$(c.target);if(d.is("textarea")){return}if(d.is("button")){c.preventDefault();d.trigger("click").blur()}else{if(d.is(".jFormComponentEnterSubmits")){c.preventDefault();d.blur();a.controlNextButton.trigger("click")}else{if(d.is("input:checkbox")){c.preventDefault();d.trigger("click")}else{if(d.is("input:password")){c.preventDefault();d.blur();if(a.options.splashPage!==null&&a.currentJFormPage.id==a.options.splashPage.jFormPage.id){a.options.splashPage.controlSplashButton.trigger("click")}else{a.controlNextButton.trigger("click")}}}}}}})},addSubmitListener:function(){var a=this;this.form.bind("submit",{context:this},function(b){b.preventDefault();a.submitEvent(b)})},initSaveState:function(){var b=this,a=this.options.saveState.interval*1000;if(this.options.saveState===null){return}this.saveIntervalSetTimeoutId=setInterval(function(){b.saveState(b.options.saveState.showSavingAlert)},a);this.saveStateInitialized=true;return},saveState:function(d){if(this.saveRunning==true){return true}this.saveRunning=true;var b=this;var a=this.durationInSeconds+this.getTimeActive();var c={};c.meta={};c.meta.totalTime=a;c.meta.currentPage=this.getActivePage().id;c.meta.maxPageIndex=this.maxJFormPageIdArrayIndexReached;c.form=this.getData();$.ajax({url:b.form.attr("action"),type:"post",data:{jFormerTask:"saveState",formData:jFormerUtility.jsonEncode(c)},dataType:"json",success:function(e){if(d===true){b.showAlert("Saving...")}b.saveRunning=false},error:function(e,g,f){if(g!="error"){f=g?g:"unknown"}b.showAlert("There was an error saving your form, we'll try again : "+f,"error");b.saveRunning=false}})},getData:function(){var a=this;this.formData={};$.each(this.jFormPages,function(c,b){a.formData[c]=b.getData()});return this.formData},setData:function(b){var a=this;this.formData=b;$.each(b,function(c,d){if(a.jFormPages[c]!=undefined){a.jFormPages[c].setData(d)}else{return}});return this.formData},setupPageScroller:function(d){var c=this;var b={adjustHeightDuration:0,jFormWrapperContainerWidth:c.form.find(".jFormWrapperContainer").width(),jFormPageWrapperWidth:c.jFormPageWrapper.width(),activePageOuterHeight:c.getActivePage().page.outerHeight()};d=$.extend(b,d);var a=this.form.find(".jFormPage");a.css("width",d.jFormWrapperContainerWidth).show();c.jFormPageScroller.css("width",d.jFormPageWrapperWidth*(a.length+1));c.jFormPageWrapper.height(d.activePageOuterHeight);c.scrollToPage(c.currentJFormPage.id,d)},setupControl:function(){var a=this;this.controlNextButton.unbind().click(function(b){b.preventDefault();b.context=a;a.submitEvent(b)}).removeAttr("disabled");this.lastEnabledPage=false;for(i=this.jFormPageIdArray.length-1;i>this.currentJFormPageIdArrayIndex;i--){if(!this.jFormPages[this.jFormPageIdArray[i]].disabledByDependency){this.lastEnabledPage=false;break}this.lastEnabledPage=true}this.controlPreviousButton.unbind().click(function(d){d.preventDefault();if(a.options.splashPage!==false&&a.currentJFormPageIdArrayIndex===0){a.currentJFormPageIdArrayIndex=null;if(a.jFormPageNavigator){a.jFormPageNavigator.hide()}a.options.splashPage.jFormPage.scrollTo()}else{if(a.jFormPages[a.jFormPageIdArray[a.currentJFormPageIdArrayIndex-1]].disabledByDependency){for(var c=1;c<=a.currentJFormPageIdArrayIndex;c++){var b=a.currentJFormPageIdArrayIndex-c;if(b==0&&a.options.splashPage!==false&&a.jFormPages[a.jFormPageIdArray[b]].disabledByDependency){if(a.jFormPageNavigator){a.jFormPageNavigator.hide()}a.options.splashPage.jFormPage.scrollTo();break}else{if(!a.jFormPages[a.jFormPageIdArray[b]].disabledByDependency){a.currentJFormPageIdArrayIndex=b;break}}}}else{a.currentJFormPageIdArrayIndex=a.currentJFormPageIdArrayIndex-1}a.scrollToPage(a.jFormPageIdArray[a.currentJFormPageIdArrayIndex])}});if(this.currentJFormPageIdArrayIndex===0&&this.currentJFormPageIdArrayIndex!=this.jFormPageIdArray.length-1&&this.lastEnabledPage===false){this.controlNextButton.html("Next");this.controlNextLi.show();this.controlPreviousLi.hide();this.controlPreviousButton.attr("disabled","disabled")}else{if(a.currentJFormPageIdArrayIndex==this.jFormPageIdArray.length-1||this.lastEnabledPage===true){this.controlNextButton.html(this.options.submitButtonText);this.controlNextLi.show();if(a.currentJFormPageIdArrayIndex===0){this.controlPreviousLi.hide();this.controlPreviousButton.attr("disabled","")}else{if(a.currentJFormPageIdArrayIndex>0){this.controlPreviousButton.removeAttr("disabled");this.controlPreviousLi.show()}}}else{this.controlNextButton.html("Next");this.controlNextLi.show();this.controlPreviousButton.removeAttr("disabled");this.controlPreviousLi.show()}}if(this.options.splashPage!==false){if(this.options.splashPage.jFormPage.active){this.options.splashPage.controlSplashLi.show();this.controlNextLi.hide();this.controlPreviousLi.hide();this.controlPreviousButton.attr("disabled","disabled")}else{this.options.splashPage.controlSplashLi.hide()}if(this.currentJFormPageIdArrayIndex===0&&this.options.saveState==false){this.controlPreviousButton.removeAttr("disabled");this.controlPreviousLi.show()}}if(this.control.find(".startOver").length==1){this.controlNextLi.hide();this.controlPreviousLi.hide();this.control.find(".startOver").one("click",function(b){b.preventDefault();a.currentJFormPageIdArrayIndex=0;a.scrollToPage(a.jFormPageIdArray[0],{onAfter:function(){$(b.target).parent().remove();a.removeJFormPage(a.id+"jFormPageFailure")}})})}},scrollToPage:function(d,c){if(this.jFormPages[d]&&this.jFormPages[d].disabledByDependency){return false}var b=this;this.controlNextButton.attr("disabled",true);this.controlPreviousButton.attr("disabled",true);if(this.jFormPages[d]&&this.jFormPages[d].options.onScrollTo.onBefore!==null){if(this.jFormPages[d].options.onScrollTo.notificationHtml!==undefined){if(b.control.find(".jformerScrollToNotification").length!=0){b.control.find(".jformerScrollToNotification").html(this.jFormPages[d].options.onScrollTo.notificationHtml)}else{b.control.append('<li class="jformerScrollToNotification">'+this.jFormPages[d].options.onScrollTo.notificationHtml+"<li>")}}this.jFormPages[d].options.onScrollTo.onBefore()}var e=this.getActivePage();e.durationActiveInSeconds=e.durationActiveInSeconds+e.getTimeActive();$.each(this.jFormPages,function(g,f){f.show();f.active=false});if(b.options.splashPage!==false&&d==b.options.splashPage.jFormPage.id){b.currentJFormPage=b.options.splashPage.jFormPage;b.currentJFormPage.show()}else{this.currentJFormPage=this.jFormPages[d]}this.currentJFormPage.active=true;if(c&&c.adjustHeightDuration!==undefined){b.adjustHeight({adjustHeightDuration:c.adjustHeightDuration})}else{b.adjustHeight()}this.jFormPageWrapper.dequeue();this.scrollToTop();var a=this.initializing;this.jFormPageWrapper.scrollTo(b.currentJFormPage.page,b.options.animationOptions.pageScroll.duration,{onAfter:function(){if($(b.jFormPageWrapper).queue("fx").length<=1){b.hideInactivePages(b.getActivePage())}if(b.maxJFormPageIdArrayIndexReached<b.currentJFormPageIdArrayIndex){b.maxJFormPageIdArrayIndexReached=b.currentJFormPageIdArrayIndex}b.updatePageNavigator();b.currentJFormPage.startTime=(new Date().getTime()/1000);if(c&&c.onAfter){c.onAfter()}b.setupControl();b.controlNextButton.removeAttr("disabled").blur();b.controlPreviousButton.removeAttr("disabled").blur();if(b.currentJFormPage.validationPassed===false&&!a){b.currentJFormPage.focusOnFirstFailedComponent()}if(b.jFormPages[d]&&b.jFormPages[d].options.onScrollTo.onAfter!==null){b.jFormPages[d].options.onScrollTo.onAfter();if(b.jFormPages[d].options.onScrollTo.notificationHtml!==null){b.control.find("li.jFormerScrollToNotification").remove()}}}});return this},scrollToTop:function(){if(this.initializing){return}var a=this;if($(window).scrollTop()>this.form.offset().top){$(document).scrollTo(a.form,a.options.animationOptions.pageScroll.duration,{offset:{top:-10}})}},getActivePage:function(){return this.currentJFormPage},getTimeActive:function(){var a=0;$.each(this.jFormPages,function(b,c){a=a+c.durationActiveInSeconds});a=a+this.getActivePage().getTimeActive();return a},hideInactivePages:function(){$.each(this.jFormPages,function(b,a){a.hide()})},clearValidation:function(){$.each(this.jFormPages,function(b,a){a.clearValidation()})},submitEvent:function(event){var self=this;event.stopPropagation();event.preventDefault();self.control.find(".jFormerFailureNotice").remove();self.form.find(".jFormerFailure").remove();var onSubmitStartResult;if(typeof(self.options.onSubmitStart)!="function"){onSubmitStartResult=eval(self.options.onSubmitStart)}else{onSubmitStartResult=self.options.onSubmitStart()}var clientSideValidationPassed=false;if(this.options.clientSideValidation){if(self.currentJFormPageIdArrayIndex<self.jFormPageIdArray.length-1&&!self.lastEnabledPage){clientSideValidationPassed=self.getActivePage().validate()}else{clientSideValidationPassed=self.validateAll()}}else{this.clearValidation();clientSideValidationPassed=true}var onSubmitFinishResult=self.options.onSubmitFinish();if(onSubmitFinishResult){if(clientSideValidationPassed&&(self.currentJFormPageIdArrayIndex==self.jFormPageIdArray.length-1)||(self.lastEnabledPage===true)){self.submitForm(event)}else{if(clientSideValidationPassed&&self.currentJFormPageIdArrayIndex<self.jFormPageIdArray.length-1){if(self.jFormPages[self.jFormPageIdArray[self.currentJFormPageIdArrayIndex+1]].disabledByDependency){for(var i=self.currentJFormPageIdArrayIndex+1;i<=self.jFormPageIdArray.length-1;i++){if(!self.jFormPages[self.jFormPageIdArray[self.currentJFormPageIdArrayIndex+i]].disabledByDependency){self.currentJFormPageIdArrayIndex=self.currentJFormPageIdArrayIndex+i;break}}}else{self.currentJFormPageIdArrayIndex=self.currentJFormPageIdArrayIndex+1}self.scrollToPage(self.jFormPageIdArray[self.currentJFormPageIdArrayIndex])}}}},validateAll:function(){var b=this;var a=true;var c=0;$.each(this.jFormPages,function(e,d){var f=d.validate();if(f===false){b.currentJFormPageIdArrayIndex=c;if(b.currentJFormPage.id!=d.id){d.scrollTo()}a=false;return false}c++});return a},adjustHeight:function(b){var a=this;var c=this.options.animationOptions.pageScroll.adjustHeightDuration;if(this.initializing){c=0}else{if(b&&b.adjustHeightDuration!==undefined){c=b.adjustHeightDuration}}this.jFormPageWrapper.animate({height:a.getActivePage().page.outerHeight()},c)},submitForm:function(c){var b=this;var e=this.form.clone(false);e.attr("id",e.attr("id")+"-clone");e.attr("style","display: none;");e.empty();e.appendTo($(this.form).parent());var d=$('<input type="hidden" name="jFormer" />').attr("value",encodeURI(jFormerUtility.jsonEncode(this.getData())));var a=$('<input type="hidden" name="jFormerId" value="'+this.id+'" />');e.append(d);e.append(a);this.form.find("input:file").each(function(j,h){if($(h).val()!=""){var o=$(h).closest(".jFormSection").attr("id");var g=$(h).closest(".jFormPage").attr("id");if($(h).attr("id").match(/-section[0-9]+/)){var k=null;var l=$(h).closest(".jFormSection");var f=l.attr("id").replace(/-section[0-9]+/,"");o=o.replace(/-section[0-9]+/,"");l.closest(".jFormPage").find("div[id*="+f+"]").each(function(q,p){if(l.attr("id")==$(p).attr("id")){k=q+1;return false}return true});h.attr("name",h.attr("name").replace(/-section[0-9]+/,"-section"+k))}if($(h).attr("id").match(/-instance[0-9]+/)){var n=$(h).attr("id").replace(/-instance[0-9]+/,"");var m=null;$(h).closest(".jFormSection").find("input[id*="+n+"]").each(function(q,p){if($(p).attr("id")==$(h).attr("id")){m=q+1;return false}return true});h.attr("name",$(h).attr("name").replace(/-instance[0-9]+/,"-instance"+m))}$(h).attr("name",$(h).attr("name")+":"+g+":"+o);$(h).appendTo(e)}});e.submit();e.remove();if(!this.options.debugMode){this.controlNextButton.text(this.options.submitProcessingButtonText).attr("disabled","disabled")}else{this.form.find("iframe:hidden").show()}},handleFormSubmissionResponse:function(json){var self=this;if(json.status=="failure"){if(json.response.validationFailed){$.each(json.response.validationFailed,function(jFormPageKey,jFormPageValues){$.each(jFormPageValues,function(jFormSectionKey,jFormSectionValues){if($.isArray(jFormSectionValues)){$.each(jFormSectionValues,function(jFormSectionInstanceIndex,jFormSectionInstanceValues){var sectionKey;if(jFormSectionInstanceIndex!=0){sectionKey="-section"+(jFormSectionInstanceIndex+1)}else{sectionKey=""}$.each(jFormSectionInstanceValues,function(jFormComponentKey,jFormComponentErrors){self.jFormPages[jFormPageKey].jFormSections[jFormSectionKey].instanceArray[jFormSectionInstanceIndex].jFormComponents[jFormComponentKey+sectionKey].handleServerValidationResponse(jFormComponentErrors)})})}else{$.each(jFormSectionValues,function(jFormComponentKey,jFormComponentErrors){self.jFormPages[jFormPageKey].jFormSections[jFormSectionKey].jFormComponents[jFormComponentKey].handleServerValidationResponse(jFormComponentErrors)})}})})}if(json.response.failureHtml){this.control.find(".jFormerFailure").remove();this.control.after('<div class="jFormerFailure">'+json.response.failureHtml+"</div>")}this.form.find("iframe").contents().find("body script").remove();if(this.form.find("iframe").contents().find("body").html()!==null){this.form.find(".jFormerFailure").append("<p>Output:</p>"+this.form.find("iframe").contents().find("body").html().trim())}this.controlNextButton.text(this.options.submitButtonText);this.controlNextButton.removeAttr("disabled");this.getActivePage().focusOnFirstFailedComponent()}else{if(json.status=="success"){if(json.response.successPageHtml){clearInterval(this.saveIntervalSetTimeoutId);var successPageDiv=$('<div id="'+this.id+'jFormPageSuccess" class="jFormPage jFormPageSuccess">'+json.response.successPageHtml+"</div>");successPageDiv.width(this.jFormPages[this.jFormPageIdArray[0]].page.width());this.jFormPageScroller.append(successPageDiv);var jFormPageSuccess=new JFormPage(this,this.id+"jFormPageSuccess");this.addJFormPage(jFormPageSuccess);this.control.hide();if(this.jFormPageNavigator){this.jFormPageNavigator.hide()}jFormPageSuccess.scrollTo()}else{if(json.response.failurePageHtml){var failurePageDiv=$('<div id="'+this.id+'jFormPageFailure" class="jFormPage jFormPageFailure">'+json.response.failurePageHtml+"</div>");failurePageDiv.width(this.jFormPages[this.jFormPageIdArray[0]].page.width());this.jFormPageScroller.append(failurePageDiv);var jFormPageFailure=new JFormPage(this,this.id+"jFormPageFailure");this.addJFormPage(jFormPageFailure);this.control.append($('<li class="startOver"><button class="startOverButton">Start Over</button></li>'));jFormPageFailure.scrollTo()}}if(json.response.failureNoticeHtml){this.control.find(".jFormerFailureNotice").remove();this.control.append('<li class="jFormerFailureNotice">'+json.response.failureNoticeHtml+"</li>");this.controlNextButton.text(this.options.submitButtonText);this.controlNextButton.removeAttr("disabled")}if(json.response.failureHtml){this.control.find(".jFormerFailure").remove();this.control.after('<div class="jFormerFailure">'+json.response.failureHtml+"</div>");this.controlNextButton.text(this.options.submitButtonText);this.controlNextButton.removeAttr("disabled")}if(json.response.successJs){eval(json.response.successJs)}else{if(json.response.failureJs){eval(json.response.failureJs)}}if(json.response.redirect){this.controlNextButton.html("Redirecting...");document.location=json.response.redirect}}}},showAlert:function(g,d,f,c){if(!this.options.alertsEnabled){return}var h=$.extend(this.options.animationOptions.alert,c);var b=this.form.find(".jFormerAlertWrapper");var e=this.form.find(".jFormerAlert");e.addClass(d);e.text(g);if(h.appearEffect=="slide"){b.slideDown(h.appearDuration,function(){setTimeout(a(),1000)})}else{if(h.appearAffect=="fade"){b.fadeIn(h.appearDuration,function(){setTimeout(a(),1000)})}}function a(){if(h.hideEffect=="slide"){b.slideUp(h.hideDuration,function(){})}else{if(h.hideEffect=="fade"){b.fadeOut(h.hideDuration,function(){})}}}},showModal:function(f,g,h,l){var k=this.form.find(".jFormerModalWrapper");var d=$.extend(this.options.animationOptions.modal,l);if(k.length==0){var b=$('<div class="jFormerModalTransparency"></div>');k=$('<div style="display: none;" class="jFormerModalWrapper"><div class="jFormerModal"><div class="jFormerModalHeader">'+f+'</div><div class="jFormerModalContent">'+g+'</div><div class="jFormerModalFooter"><button>Okay</button></div></div></div>');this.form.find(".jFormerAlertWrapper").after(b);this.form.find(".jFormerAlertWrapper").after(k);if(h!=""){k.addClass(h)}k.find("button").click(function(m){$(".jFormerModalWrapper").hide(d.hideDuration);$(".jFormerModalTransparency").hide(d.hideDuration);$(".jFormerModalWrapper").remove();$(".jFormerModalTransparency").remove();$("body").css("overflow","auto")})}var j=k.find(".jFormerModal");j.css({position:"absolute"});var c=$(window);$("body").css("overflow","hidden");c.resize(function(m){a=(c.width()/2)-(j.width()/2);e=(c.height()/2)-(j.height()/2)+c.scrollTop();j.css({top:e,left:a});$(".jFormerModalTransparency").width(c.width()).height(c.height())});$(".jFormerModalTransparency").click(function(m){if($(m.target).is(".jFormerModalTransparency")){k.hide(d.hideDuration);k.remove();$(".jFormerModalTransparency").hide(d.hideDuration);$(".jFormerModalTransparency").remove();$("body").css("overflow","auto")}});k.show(d.appearDuration);var a=(c.width()/2)-(j.width()/2);var e=(c.height()/2)-(j.height()/2)+c.scrollTop();$(".jFormerModalTransparency").width(c.width()).height(c.height()*1.1).css("top",c.scrollTop());j.css({top:e,left:a})},recordAnalytics:function(){var a=this;if(!this.options.disableAnalytics){setTimeout(function(){var c="https:"==document.location.protocol?"https://ssl.":"http://www.";var b=$('<img src="'+c+"jformer.com/analytics/analytics.gif?pageCount="+a.jFormPageIdArray.length+"&componentCount="+a.jFormComponentCount+"&formId="+a.id+'" style="display: none;" />');a.form.append(b);b.remove()},3000)}},updateProgressBar:function(){var a=0;var b=0;$.each(this.jFormPages,function(d,e){$.each(e.jFormSections,function(g,f){$.each(f.jFormComponents,function(j,h){if(h.isRequired===true&&(h.disabledByDependency===false&&f.disabledByDependency===false)){if(h.type!="JFormComponentLikert"){a=a+1;if(h.requiredCompleted===true){b=b+1}}}})})});var c=parseInt((b/a)*100);this.form.find(".jFormerProgressBar").animate({width:c+"%"},500).html("<p>"+c+"%</p>")},addBlurTipListener:function(){var a=this;$(document).bind("blurTip",function(c,b,d){if(d=="hide"){a.blurredTips=$.map(a.blurredTips,function(f,e){if($(f).attr("id")==b.attr("id")){return null}else{return f}});if(a.blurredTips[a.blurredTips.length-1]!=undefined){a.blurredTips[a.blurredTips.length-1].removeClass("jFormerTipBlurred")}}else{if(d=="show"){if(a.blurredTips.length>0){$.each(a.blurredTips,function(e,f){$(f).addClass("jFormerTipBlurred")})}a.blurredTips.push(b);b.removeClass("jFormerTipBlurred")}}})}});JFormerUtility=function(){};$.extend(JFormerUtility.prototype,{isSet:function(){var c=arguments;var b=c.length;var d=0;if(b==0){throw new Error("Empty isSet.")}while(d!=b){if(typeof(c[d])=="undefined"||c[d]===null){return false}else{d++}}return true},empty:function(a){var b;if(a===""||a===0||a==="0"||a===null||a===false||a===undefined){return true}if(typeof a=="object"){for(b in a){if(typeof a[b]!=="function"){return false}}return true}return false},getExtraWidth:function(b){var b=$(b);var a=0;a+=parseInt(b.css("padding-left"),10)+parseInt(b.css("padding-right"),10);a+=parseInt(b.css("margin-left"),10)+parseInt(b.css("margin-right"),10);a+=parseInt(b.css("borderLeftWidth"),10)+parseInt(b.css("borderRightWidth"),10);return a},jsonEncode:function(e){var b=window.JSON;if(typeof b==="object"&&typeof b.stringify==="function"){return b.stringify(e)}var c=e;var a=function(f){var h=/[\\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;var g={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};h.lastIndex=0;return h.test(f)?'"'+f.replace(h,function(j){var k=g[j];return typeof k==="string"?k:"\\u"+("0000"+j.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+f+'"'};var d=function(q,m){var o="";var g="    ";var j=0;var h="";var r="";var f=0;var n=o;var l=[];var p=m[q];if(p&&typeof p==="object"&&typeof p.toJSON==="function"){p=p.toJSON(q)}switch(typeof p){case"string":return a(p);case"number":return isFinite(p)?String(p):"null";case"boolean":case"null":return String(p);case"object":if(!p){return"null"}o+=g;l=[];if(Object.prototype.toString.apply(p)==="[object Array]"){f=p.length;for(j=0;j<f;j+=1){l[j]=d(j,p)||"null"}r=l.length===0?"[]":o?"[\n"+o+l.join(",\n"+o)+"\n"+n+"]":"["+l.join(",")+"]";o=n;return r}for(h in p){if(Object.hasOwnProperty.call(p,h)){r=d(h,p);if(r){l.push(a(h)+(o?": ":":")+r)}}}r=l.length===0?"{}":o?"{\n"+o+l.join(",\n"+o)+"\n"+n+"}":"{"+l.join(",")+"}";o=n;return r}};return d("",{"":c})}});jFormerUtility=new JFormerUtility();(function(){var a=false,b=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Class=function(){};Class.extend=function(g){var f=this.prototype;a=true;var e=new this();a=false;for(var d in g){e[d]=typeof g[d]=="function"&&typeof f[d]=="function"&&b.test(g[d])?(function(h,j){return function(){var l=this._super;this._super=f[h];var k=j.apply(this,arguments);this._super=l;return k}})(d,g[d]):g[d]}function c(){if(!a&&this.init){this.init.apply(this,arguments)}}c.prototype=e;c.constructor=c;c.extend=arguments.callee;return c}})();JFormPage=Class.extend({init:function(jFormer,pageId,options){this.options=$.extend({dependencyOptions:null,onScrollTo:{onBefore:null,onAfter:null,notificationHtml:null}},options||{});if(this.options.onScrollTo.onBefore!==null){var onBeforeFunction=$.trim(this.options.onScrollTo.onBefore);this.options.onScrollTo.onBefore=function(){eval(onBeforeFunction)}}if(this.options.onScrollTo.onAfter!==null){var onAfterFunction=$.trim(this.options.onScrollTo.onAfter);this.options.onScrollTo.onAfter=function(){eval(onAfterFunction)}}this.jFormer=jFormer;this.id=pageId;this.page=$("#"+pageId);this.jFormSections={};this.formData={};this.active=false;this.validationPassed=null;this.disabledByDependency=false;this.durationActiveInSeconds=0},addSection:function(a){this.jFormSections[a.id]=a;return this},getData:function(){var a=this;if(this.disabledByDependency){this.formData=null}else{this.formData={};$.each(this.jFormSections,function(b,c){a.formData[b]=c.getData()})}return this.formData},setData:function(b){var a=this;$.each(b,function(d,c){if(a.jFormSections[d]!=undefined){a.jFormSections[d].setData(c)}else{b[d]=undefined}});this.formData=b;return this.formData},getTimeActive:function(){var a=(new Date().getTime()/1000)-this.startTime;return a},validate:function(b){if(this.disabledByDependency){return null}var a=this;var c=$.each;a.validationPassed=true;c(this.jFormSections,function(e,d){c(d.instanceArray,function(f,g){c(g.jFormComponents,function(j,h){if(h.type=="JFormComponentLikert"){return}c(h.instanceArray,function(l,k){k.validate();if(k.validationPassed==false){a.validationPassed=false}})})})});if(a.validationPassed){$("#navigatePage"+(a.jFormer.currentJFormPageIdArrayIndex+1)).removeClass("jFormPageNavigatorLinkWarning")}else{if(!b){if(this.id===this.jFormer.currentJFormPage.id){this.focusOnFirstFailedComponent()}}}return a.validationPassed},clearValidation:function(){$.each(this.jFormSections,function(b,a){a.clearValidation()})},focusOnFirstFailedComponent:function(){var b=$.each,a=true;b(this.jFormSections,function(d,c){b(c.instanceArray,function(e,f){b(f.jFormComponents,function(g,h){b(h.instanceArray,function(k,j){if(!j.validationPassed||j.errorMessageArray.length>0){var m=j.component.offset().top-30;var l=$(window).scrollTop();if(l<m&&l+$(window).height()>j.component.position().top){j.component.find(":input:first").focus()}else{$.scrollTo(m+"px",500,{onAfter:function(){j.component.find(":input:first").focus()}})}a=false}return a});return a});return a});return a})},scrollTo:function(a){this.jFormer.scrollToPage(this.id,a);return this},show:function(){if(this.page.hasClass("jFormPageInactive")){this.page.removeClass("jFormPageInactive")}},hide:function(){if(!this.active){this.page.addClass("jFormPageInactive")}},disableByDependency:function(b){if(this.disabledByDependency!==b){var a=$.inArray(this.id,this.jFormer.jFormPageIdArray);if(b===true){this.page.hide();if(this.jFormer.options.pageNavigator!==false){if(this.options.dependencyOptions.display=="hide"){$("#navigatePage"+(a+1)).hide();this.jFormer.renumberPageNavigator()}else{$("#navigatePage"+(a+1)).addClass("jFormPageNavigatorLinkDependencyLocked").find("span").html("&nbsp;")}}}else{this.checkChildrenDependencies();this.page.show();if(this.jFormer.options.pageNavigator!==false){if(this.options.dependencyOptions.display=="hide"){$("#navigatePage"+(a+1)).show()}else{$("#navigatePage"+(a+1)).removeClass("jFormPageNavigatorLinkDependencyLocked")}this.jFormer.renumberPageNavigator()}}this.disabledByDependency=b;this.jFormer.setupControl()}},checkDependencies:function(){var self=this;if(this.options.dependencyOptions!==null){var disable=!(eval(self.options.dependencyOptions.jsFunction));this.disableByDependency(disable)}},checkChildrenDependencies:function(){$.each(this.jFormSections,function(a,b){b.checkDependencies()})}});JFormSection=Class.extend({init:function(c,b,a){this.options=$.extend({dependencyOptions:null,instanceOptions:null},a||{});this.parentJFormPage=c;this.id=b;this.section=$("#"+b);this.jFormComponents={};this.formData=null;this.disabledByDependency=false;if(this.options.isInstance){this.instanceArray=null;this.clone=null}else{if(this.options.instanceOptions!=null){this.clone=this.section.clone();this.iterations=1}else{this.clone=null}this.instanceArray=[this];this.createInstanceButton()}},createInstanceButton:function(){var a=this;if(this.options.instanceOptions!=null){var c=this.id+"-addInstance",b='<button id="'+c+'" class="jFormSectionAddInstanceButton">'+this.options.instanceOptions.addButtonText+"</button>";if(this.options.dependencyOptions!==null){if(this.options.dependencyOptions.display=="hide"){b.hide()}}this.section.after(b);this.parentJFormPage.page.find("#"+c).bind("click",function(d){d.preventDefault();if(!a.disabledByDependency){a.addSectionInstance()}})}},addSectionInstance:function(){var b=this;if(this.instanceArray.length<this.options.instanceOptions.max||this.options.instanceOptions.max===0){this.iterations++;var f=this.clone.clone(),a=this.id+"-removeInstance",c='<button id="'+a+'" class="jFormSectionRemoveInstanceButton">'+this.options.instanceOptions.removeButtonText+"</button>";var d={};if(this.options.instanceOptions.animationOptions!==undefined){$.extend(d,this.parentJFormPage.jFormer.options.animationOptions.instance,this.options.instanceOptions.animationOptions)}else{d=this.parentJFormPage.jFormer.options.animationOptions.instance}$(f).append(c);f.find("#"+a).bind("click",function(g){var h=$(g.target);g.preventDefault();b.instanceArray=$.map(b.instanceArray,function(k,j){if(k.section.attr("id")==h.parent().attr("id")){k=null}return k});if(d.removeEffect=="none"||d.removeDuration===0){h.parent().remove();h.remove()}else{if(d.removeEffect=="slide"){h.parent().slideUp(d.removeDuration,function(){h.parent().remove();h.remove()});b.parentJFormPage.jFormer.adjustHeight(d)}else{h.parent().fadeOut(d.removeDuration,function(){h.parent().remove();h.remove();b.parentJFormPage.jFormer.adjustHeight(d)})}}if(b.instanceArray.length<b.options.instanceOptions.max||b.options.instanceOptions.max===0){b.parentJFormPage.page.find("#"+b.id+"-addInstance").show()}b.relabelSectionInstances(b.instanceArray,d)});f.hide();this.parentJFormPage.page.find("#"+this.id+"-addInstance").before(f);if(d.appearEffect=="none"||d.appearDuration===0){f.show()}else{if(d.appearEffect=="slide"){f.slideDown(d.appearDuration,function(){b.parentJFormPage.jFormer.adjustHeight(d)})}else{f.fadeIn(d.appearDuration,function(){});b.parentJFormPage.jFormer.adjustHeight(d)}}this.nameSectionInstance(f);var e=this.createSectionInstanceObject(f,this.options);this.instanceArray.push(e);this.relabelSectionInstances(this.instanceArray,d);if(this.instanceArray.length>=this.options.instanceOptions.max&&this.options.instanceOptions.max!==0){this.parentJFormPage.page.find("#"+this.id+"-addInstance").hide()}}return this},removeInstance:function(){return this},nameSectionInstance:function(c){var b=this,a="";$(c).attr("id",$(c).attr("id")+"-section"+this.iterations);$(c).find("*").each(function(f,g){if($(g).attr("id")){d(g,"id")}if($(g).attr("for")){d(g,"for")}if($(g).attr("name")){d(g,"name")}});function d(g,f){a=e($(g).attr(f));if(a==""){$(g).attr(f,$(g).attr(f)+"-section"+b.iterations+a)}else{$(g).attr(f,$(g).attr(f).replace(a,"-section"+b.iterations+a))}}function e(g){var f="";if(g.match(/(\-[A-Za-z0-9]+)&?/)){f=g.match(/(\-[A-Za-z0-9]+)&?/)[1]}else{}return f}return c},createSectionInstanceObject:function(e,c){var a=$.extend(true,{},c);a.isInstance=true;var b=this,d=new JFormSection(this.parentJFormPage,this.id+"-section"+this.iterations,a);$.each(this.jFormComponents,function(g,f){var h=$.extend(true,{},f.options);h.isInstance=false;var j=new window[f.type](d,f.id+"-section"+b.iterations,f.type,h);d.addComponent(j)});return d},relabelSectionInstances:function(b,a){$.each(b,function(e,c){if(e!==0){var f=e+1,d=c.section.find(".jFormSectionTitle").children(":first");if(d.length>0){if(d.text().match(/(\([0-9]+\))$/)){d.text(d.text().replace(/(\([0-9]+\))$/,"("+f+")"))}else{d.text(d.text()+" ("+f+")")}}}});this.parentJFormPage.jFormer.adjustHeight(a)},addComponent:function(a){this.jFormComponents[a.id]=a;return this},clearValidation:function(){$.each(this.jFormComponents,function(b,a){a.clearValidation()})},getData:function(){var a=this;if(this.disabledByDependency){this.formData=null}else{if(this.instanceArray.length>1){this.formData=[];$.each(this.instanceArray,function(b,d){var c={};$.each(d.jFormComponents,function(e,f){if(f.type!="JFormComponentLikertStatement"){e=e.replace(/-section[0-9]+/,"");c[e]=f.getData()}});a.formData.push(c)})}else{this.formData={};$.each(this.jFormComponents,function(c,b){if(b.type!="JFormComponentLikertStatement"){a.formData[c]=b.getData()}})}}return this.formData},setData:function(b){var a=this;if($.isArray(b)){$.each(b,function(d,c){if(d!==0&&a.instanceArray[d]==undefined){a.addSectionInstance()}$.each(c,function(e,f){if(d!==0){e=e+"-section"+(d+1)}if(a.instanceArray[d].jFormComponents[e]!=undefined){a.instanceArray[d].jFormComponents[e].setData(f)}})})}else{$.each(b,function(c,d){if(a.jFormComponents[c]!=undefined){a.jFormComponents[c].setData(d)}})}},disableByDependency:function(b){var a=this;if(a.parentJFormPage.jFormer.initializing){var e={adjustHeightDuration:0,appearDuration:0,appearEffect:"none",hideDuration:0,hideEffect:"none"}}else{if(this.options.dependencyOptions.animationOptions!==undefined){e=$.extend(e,this.parentJFormPage.jFormer.options.animationOptions.dependency,this.options.dependencyOptions.animationOptions)}else{e=this.parentJFormPage.jFormer.options.animationOptions.dependency}}var d=this.section;$.each(this.instanceArray,function(f,g){if(f!==0){d=d.add(g.section)}});if(this.options.instanceOptions!==null&&(this.instanceArray.length<this.options.instanceOptions.max||this.options.instanceOptions.max===0)){var c=$(this.parentJFormSection.section.find("#"+this.id+"-addInstance"));if(a.parentJFormPage.jFormer.initializing){if(!b&&c.is(":hidden")){c.show();a.parentJFormPage.jFormer.adjustHeight({adjustHeightDuration:0})}}d=d.add(c)}if(this.disabledByDependency!==b){if(b){if(this.options.dependencyOptions.display=="hide"){if(e.hideEffect=="none"||e.hideDuration===0){d.hide();a.parentJFormPage.jFormer.adjustHeight(e)}else{if(e.appearEffect==="fade"){d.fadeOut(e.hideDuration,function(){a.parentJFormPage.jFormer.adjustHeight(e)})}else{if(e.appearEffect==="slide"){d.slideUp(e.hideDuration,function(){a.parentJFormPage.jFormer.adjustHeight(e)})}}}}else{d.addClass("jFormSectionDependencyDisabled").find(":not(.jFormComponentDisabled) > :input").attr("disabled","disabled");this.parentJFormPage.jFormer.adjustHeight({adjustHeightDuration:0})}}else{if(this.options.dependencyOptions.display=="hide"){if(e.appearEffect=="none"||e.appearDuration===0){d.show();a.parentJFormPage.jFormer.adjustHeight(e)}else{if(e.hideEffect==="fade"){d.fadeIn(e.appearDuration);a.parentJFormPage.jFormer.adjustHeight(e)}else{if(e.hideEffect==="slide"){d.slideDown(e.appearDuration);a.parentJFormPage.jFormer.adjustHeight(e)}}}}else{d.removeClass("jFormSectionDependencyDisabled").find(":not(.jFormComponentDisabled) > :input").removeAttr("disabled");this.parentJFormPage.jFormer.adjustHeight({adjustHeightDuration:0})}this.checkChildrenDependencies()}this.disabledByDependency=b}},checkDependencies:function(){var self=this;if(this.options.dependencyOptions!==null){var disable=!(eval(self.options.dependencyOptions.jsFunction));this.disableByDependency(disable)}},checkChildrenDependencies:function(){$.each(this.jFormComponents,function(a,b){b.checkDependencies()})}});JFormComponent=Class.extend({init:function(d,c,b,a){this.options=$.extend({validationOptions:[],showErrorTipOnce:false,triggerFunction:null,componentChangedOptions:null,dependencyOptions:null,instanceOptions:null,tipTargetPosition:"rightMiddle",tipCornerPosition:"leftTop",isInstance:false},a||{});this.parentJFormSection=d;this.id=c;this.component=$("#"+c+"-wrapper");this.formData=null;this.type=b;this.errorMessageArray=[];this.tip=null;this.tipDiv=this.component.find("#"+this.id+"-tip");this.tipTarget=null;this.validationPassed=true;this.disabledByDependency=false;this.isRequired=false;this.requiredCompleted=false;this.validationFunctions={required:function(e){var f=[gLang.requis];return e.value!=""?"success":f}};if(this.options.isInstance){this.instanceArray=null;this.clone=null}else{if(this.options.instanceOptions!=null){this.clone=this.component.clone();this.iterations=1}else{this.clone=null}this.instanceArray=[this];this.createInstanceButton()}this.initialize();this.reformValidations();this.addHighlightListeners();this.defineComponentChangedEventListener();this.catchComponentChangedEventListener();if($.trim(this.tipDiv.html())!==""){this.addTip()}this.addTipListeners()},addHighlightListeners:function(){var a=this;this.component.find(":input:not(button):not(hidden)").each(function(c,b){$(b).bind("focus",function(){a.highlight()});$(b).bind("blur",function(d){a.removeHighlight();if((a.type=="JFormComponentName"||a.type=="JFormComponentAddress"||a.type=="JFormComponentCreditCard")&&a.changed===true){a.validate()}})});if(this.component.find("input:checkbox, input:radio").length>0){this.component.mouseenter(function(b){a.highlight()});this.component.mouseleave(function(b){a.removeHighlight()})}return this},reformValidations:function(){var b={},a=this;$.each(this.options.validationOptions,function(c,d){if(d=="required"){a.isRequired=true}if(c>=0){b[d]={component:a.component}}else{if(typeof(d)!="object"){b[c]={component:a.component};b[c][c]=d}else{if(typeof(d)=="object"){if(d[0]!=undefined){b[c]={};b[c][c]=d}else{b[c]=d}b[c].component=a.component}}}});this.options.validationOptions=b},defineComponentChangedEventListener:function(){var a=this;this.component.find("input:checkbox, input:radio").each(function(c,b){$(b).bind("click",function(d){$(this).trigger("jFormComponent:changed",a)})});this.component.find(":input:not(button, :checkbox, :radio)").each(function(c,b){$(b).bind("change",function(d){$(this).trigger("jFormComponent:changed",a)})})},catchComponentChangedEventListener:function(){var self=this;this.component.bind("jFormComponent:changed",function(event){if(self.options.triggerFunction!==null){eval(self.options.triggerFunction)}if(self.type=="JFormComponentName"||self.type=="JFormComponentAddress"||self.type=="JFormComponentLikert"||self.type=="JFormComponentCreditCard"){self.changed=true}if(self.parentJFormSection.parentJFormPage.jFormer.options.clientSideValidation){self.validate()}if(self.parentJFormSection.parentJFormPage.jFormer.options.progressBar!==false){self.parentJFormSection.parentJFormPage.jFormer.updateProgressBar()}})},highlight:function(){this.component.addClass("jFormComponentHighlight").trigger("jFormComponent:highlighted",this.component);this.component.trigger("jFormComponent:showTip",this.component)},removeHighlight:function(){var a=this;this.component.removeClass("jFormComponentHighlight").trigger("jFormComponent:highlightRemoved",this.component);setTimeout(function(){if(!a.component.hasClass("jFormComponentHighlight")){a.component.trigger("jFormComponent:hideTip",a.component)}},1)},getData:function(){var a=this;if(this.disabledByDependency||this.parentJFormSection.disabledByDependency){this.formData=null}else{if(this.instanceArray.length>1){this.formData=[];$.each(this.instanceArray,function(c,b){var d=b.getValue();a.formData.push(d)})}else{this.formData=this.getValue()}}return this.formData},setData:function(b){var a=this;if($.isArray(b)){$.each(b,function(c,d){if((a.type=="JFormComponentMultipleChoice"&&($.isArray(d)||a.multipeChoiceType=="radio"))||a.type!="JFormComponentMultipleChoice"){if(c!==0&&a.instanceArray[c]==undefined){a.addInstance()}a.instanceArray[c].setValue(d)}else{a.setValue(b);return false}})}else{this.setValue(b)}},createInstanceButton:function(){var a=this;if(this.options.instanceOptions!=null){var b=$('<button id="'+this.id+'-addInstance" class="jFormComponentAddInstanceButton">'+this.options.instanceOptions.addButtonText+"</button>");if(this.options.dependencyOptions!==null){b.hide()}this.component.after(b);this.parentJFormSection.section.find("#"+this.id+"-addInstance").bind("click",function(c){c.preventDefault();if(!a.disabledByDependency){a.addInstance()}})}},addInstance:function(){if(this.options.componentChangedOptions!=null&&this.options.componentChangedOptions.instance!=undefined&&this.options.componentChangedOptions.instance==true){this.component.trigger("jFormComponent:changed",this)}var b=this;if(this.instanceArray.length<this.options.instanceOptions.max||this.options.instanceOptions.max===0){var f=this.clone.clone();var a=this.parentJFormSection.section.find("#"+this.id+"-addInstance");var d={};if(this.options.instanceOptions.animationOptions!==undefined){d=$.extend(d,this.parentJFormSection.parentJFormPage.jFormer.options.animationOptions.instance,this.options.instanceOptions.animationOptions)}else{d=this.parentJFormSection.parentJFormPage.jFormer.options.animationOptions.instance}$(f).append('<button id="'+this.id+'-removeInstance" class="jFormComponentRemoveInstanceButton">'+this.options.instanceOptions.removeButtonText+"</button>");f.find("#"+this.id+"-removeInstance").bind("click",function(g){var h=$(g.target);g.preventDefault();b.instanceArray=$.map(b.instanceArray,function(k,j){if(k.component.attr("id")==h.parent().attr("id")){if(k.tip!=null){k.tip.hide()}k=null}return k});if(d.removeEffect=="none"||d.removeDuration===0){h.parent().remove();h.remove()}else{if(d.removeEffect=="slide"){h.parent().slideUp(d.removeDuration,function(){h.parent().remove();h.remove();b.parentJFormSection.parentJFormPage.jFormer.adjustHeight(d)})}else{h.parent().fadeOut(d.removeDuration,function(){h.parent().remove();h.remove();b.parentJFormSection.parentJFormPage.jFormer.adjustHeight(d)})}}if(b.instanceArray.length<b.options.instanceOptions.max||b.options.instanceOptions.max===0){a.show()}b.relabelInstances(b.instanceArray,d)});f.hide();a.before(f);if(d.appearEffect=="none"||d.appearDuration===0){if(!b.disabledByDependency||(b.disabledByDependency&&b.options.dependencyOptions.display!="hide")){f.show()}}else{if(!b.disabledByDependency){if(d.appearEffect=="slide"){f.slideDown(d.appearDuration,function(){b.parentJFormSection.parentJFormPage.jFormer.jFormPageWrapper.dequeue();b.parentJFormSection.parentJFormPage.jFormer.adjustHeight(d)})}else{f.fadeIn(d.appearDuration,function(){b.parentJFormSection.parentJFormPage.jFormer.jFormPageWrapper.dequeue();b.parentJFormSection.parentJFormPage.jFormer.adjustHeight(d)})}}}this.nameInstance(f);var e=this.createInstanceObject(f,this.options);this.instanceArray.push(e);this.relabelInstances(this.instanceArray,d);if(this.instanceArray.length==this.options.instanceOptions.max&&this.options.instanceOptions.max!==0){a.hide()}if(this.options.dependencies!=undefined){var c=b.parentJFormSection.parentJFormPage.jFormer;e.component.find(":text, textarea").bind("keyup",function(g){$.each(b.options.dependencies.pages,function(j,h){c.jFormPages[h.jFormPageId].checkDependencies()});$.each(b.options.dependencies.sections,function(j,h){c.jFormPages[h.jFormPageId].jFormSections[h.jFormSectionId].checkDependencies()});$.each(b.options.dependencies.components,function(j,h){c.jFormPages[h.jFormPageId].jFormSections[h.jFormSectionId].jFormComponents[h.jFormComponentId].checkDependencies()})});e.component.bind("jFormComponent:changed",function(g){$.each(b.options.dependencies.pages,function(j,h){c.jFormPages[h.jFormPageId].checkDependencies()});$.each(b.options.dependencies.sections,function(j,h){c.jFormPages[h.jFormPageId].jFormSections[h.jFormSectionId].checkDependencies()});$.each(b.options.dependencies.components,function(j,h){c.jFormPages[h.jFormPageId].jFormSections[h.jFormSectionId].jFormComponents[h.jFormComponentId].checkDependencies()})})}if(this.disabledByDependency){this.disableByDependency(true)}}return this},nameInstance:function(c){c=$(c);var b=this,a="";this.iterations++;c.attr("id",c.attr("id").replace("-wrapper","-instance"+this.iterations+"-wrapper"));c.find("*").each(function(f,g){if($(g).attr("id")){d(g,"id")}if($(g).attr("for")){d(g,"for")}if($(g).attr("name")){d(g,"name")}});function d(g,f){a=e($(g).attr(f));if(a==""){$(g).attr(f,$(g).attr(f)+"-instance"+b.iterations+a)}else{$(g).attr(f,$(g).attr(f).replace(a,"-instance"+b.iterations+a))}}function e(g){var f="";if(g.match(/\-(div|label|tip|removeInstance)\b/)){f=g.match(/\-(div|label|tip|removeInstance)\b/)[0]}else{}return f}return c},createInstanceObject:function(d,b){var a=$.extend(true,{},b);a.isInstance=true;if(this.options.componentChangedOptions!=null&&this.options.componentChangedOptions.children!=undefined&&this.options.componentChangedOptions.children==false){a.componentChangedOptions=null}var c=new window[this.type](this.parentJFormSection,this.id+"-instance"+this.iterations,this.type,a);return c},relabelInstances:function(b,a){$.each(b,function(e,c){if(e!==0){var f=e+1,d=c.component.find("#"+c.component.attr("id").replace("-wrapper","-label"));if(d.length>0){var g=d.find("span.jFormComponentLabelRequiredStar");if(g.length>0){g.remove()}if(d.html().match(/:$/)){d.html(d.html().replace(/(\([0-9]+\))?:/," ("+f+"):"))}else{if(d.text().match(/(\([0-9]+\))$/)){d.text(d.text().replace(/(\([0-9]+\))$/,"("+f+")"))}else{d.text(d.text()+" ("+f+")")}}d.append(g)}else{d=c.component.find("label");var g=d.find("span.jFormComponentLabelRequiredStar");if(g.length>0){g.remove()}if(d.text().match(/(\([0-9]+\))$/)){d.text(d.text().replace(/(\([0-9]+\))$/,"("+f+")"))}else{d.text(d.text()+" ("+f+")")}d.append(g)}}});this.parentJFormSection.parentJFormPage.jFormer.adjustHeight(a)},addTip:function(){var a=this;if(typeof(this.tip)!=="function"){var b=this.tipTarget.simpletip({persistent:true,focus:true,position:"topRight",content:a.tipDiv,baseClass:"jFormerTip",hideEffect:"none",onBeforeShow:function(){if(a.tipDiv.find(".tipContent").text()==""){return false}},onShow:function(){var c=$(window).height();var d=this.getTooltip().offset().top+this.getTooltip().outerHeight()+12;if($(window).scrollTop()+c<d){$.scrollTo(d-c+"px",250,{axis:"y"})}}});this.tip=b.simpletip()}},addTipListeners:function(){var a=this;this.component.bind("jFormComponent:showTip",function(b){if(a.tip&&typeof(a.tip)=="object"&&$.trim(a.tipDiv.html())!==""){a.tip.show()}});this.component.bind("jFormComponent:hideTip",function(b){if(a.tip&&typeof(a.tip)=="object"){a.tip.hide()}if(a.options.showErrorTipOnce){a.clearValidation()}});return this},clearValidation:function(){this.errorMessageArray=[];this.validationPassed=true;this.component.removeClass("jFormComponentValidationFailed");this.component.addClass("jFormComponentValidationPassed");this.component.find(".tipErrorUl").remove();if(this.tip&&typeof(this.tip)=="object"){this.tip.update(this.tipDiv.html());if($.trim(this.tipDiv.find(".tipContent").html())==""){this.tipDiv.hide()}}},initialize:function(){},getValue:function(){},setValue:function(){},clearData:function(){this.component.find(":input").val("")},validate:function(b){if(this.disabledByDependency||this.parentJFormSection.disabledByDependency){return null}if(this.options.validationOptions.length<1){return true}if(b){var d=true}var a=this;this.clearValidation();var c=this.getValue();if(c===null){return true}$.each(this.options.validationOptions,function(f,h){h.value=c;var g=a.validationFunctions[f](h);if(g=="success"){if(f.match("required")){a.requiredCompleted=true}return true}else{if(f.match("required")){a.requiredCompleted=false;if(a.parentJFormSection.parentJFormPage.jFormer.options.pageNavigator!=false){var e=$.inArray(a.parentJFormSection.parentJFormPage.id,a.parentJFormSection.parentJFormPage.jFormer.jFormPageIdArray);$("#navigatePage"+(e+1)).addClass("jFormPageNavigatorLinkWarning")}}if(b){d=false}else{$.merge(a.errorMessageArray,g)}}});if(b){return d}else{if(this.errorMessageArray.length>0){this.handleErrors();this.validationPassed=false}return this.validationPassed}},handleServerValidationResponse:function(a){$.each(this.instanceArray,function(c,b){b.clearValidation()});if(a!=null&&a.length>0){if(this.instanceArray.length!=1){$.each(this.instanceArray,function(c,b){if(!jFormerUtility.empty(a[c])){$.each(a[c],function(d,e){if(e!=""){b.errorMessageArray.push(e)}});if(b.errorMessageArray.length>0){b.validationPassed=false;b.handleErrors()}}})}else{this.errorMessageArray=a;this.validationPassed=false;this.handleErrors()}}},handleErrors:function(){var a=this;this.component.removeClass("jFormComponentValidationPassed");this.component.addClass("jFormComponentValidationFailed");if(this.tipDiv.length==0){this.createTipDiv()}if(!this.parentJFormSection.parentJFormPage.jFormer.options.validationTips){return}var b=$('<ul id="'+this.id+'-tipErrorUl" class="tipErrorUl"></ul>');$.each(this.errorMessageArray,function(d,c){b.append("<li>"+c+"</li>")});this.tipDiv.find(".tipContent").append(b);this.tip.update(a.tipDiv.html());if(this.component.hasClass("jFormComponentHighlight")){this.tip.show()}},createTipDiv:function(){this.tipDiv=$('<div id="'+this.id+'-tip" style="display: none;"></div>');this.component.append(this.tipDiv);this.addTip()},disableByDependency:function(b){var a=this;var e={};if(this.options.componentChangedOptions!=null&&this.options.componentChangedOptions.dependency!=undefined&&this.options.componentChangedOptions.dependency==true){this.component.trigger("jFormComponent:changed",this)}var d=this.component;$.each(this.instanceArray,function(f,g){if(f!==0){d=d.add(g.component)}});if(this.options.instanceOptions!==null&&(this.instanceArray.length<this.options.instanceOptions.max||this.options.instanceOptions.max===0)){var c=$(this.parentJFormSection.section.find("#"+this.id+"-addInstance"));if(a.parentJFormSection.parentJFormPage.jFormer.initializing){if(!b&&c.is(":hidden")){c.show();a.parentJFormSection.parentJFormPage.jFormer.adjustHeight({adjustHeightDuration:0})}else{if(this.options.dependencyOptions.display=="lock"){c.show();a.parentJFormSection.parentJFormPage.jFormer.adjustHeight({adjustHeightDuration:0})}}}d=d.add(c)}if(a.parentJFormSection.parentJFormPage.jFormer.initializing){e={adjustHeightDelay:0,appearDuration:0,appearEffect:"none",hideDuration:0,hideEffect:"none"}}else{if(this.options.dependencyOptions.animationOptions!==undefined){e=$.extend(e,this.parentJFormSection.parentJFormPage.jFormer.options.animationOptions.dependency,this.options.dependencyOptions.animationOptions)}else{e=this.parentJFormSection.parentJFormPage.jFormer.options.animationOptions.dependency}}if(this.disabledByDependency!==b){if(b){this.clearValidation();if(this.options.dependencyOptions.display=="hide"){if(e.hideEffect=="none"||e.hideDuration===0){d.hide(e.hideDuration);a.parentJFormSection.parentJFormPage.jFormer.adjustHeight(e)}else{if(e.hideEffect==="fade"){d.fadeOut(e.hideDuration,function(){a.parentJFormSection.parentJFormPage.jFormer.adjustHeight(e)})}else{if(e.hideEffect==="fade"){d.slideUp(e.hideDuration,function(){a.parentJFormSection.parentJFormPage.jFormer.adjustHeight(e)})}}}}else{d.addClass("jFormComponentDependencyDisabled").find(":input").attr("disabled","disabled")}}else{if(this.options.dependencyOptions.display=="hide"){if(e.appearEffect=="none"||e.apearDuration===0){d.show();a.parentJFormSection.parentJFormPage.jFormer.adjustHeight(e)}else{if(e.appearEffect==="fade"){d.fadeIn(e.appearDuration);a.parentJFormSection.parentJFormPage.jFormer.adjustHeight(e)}else{if(e.appearEffect==="slide"){d.slideDown(e.appearDuration);a.parentJFormSection.parentJFormPage.jFormer.adjustHeight(e)}}}}else{d.removeClass("jFormComponentDependencyDisabled").find(":input").removeAttr("disabled")}}this.disabledByDependency=b}},checkDependencies:function(){var self=this;if(this.options.dependencyOptions!==null){var disable=!(eval(self.options.dependencyOptions.jsFunction));this.disableByDependency(disable)}}});JFormComponentAddress=JFormComponent.extend({init:function(d,c,b,a){this._super(d,c,b,a)},initialize:function(){this.tipTarget=this.component;if(this.options.emptyValue){this.addEmptyValues()}this.validationFunctions={required:function(a){var b=[];if(a.value.addressLine1==""){b.push([gLang["Street Address is required."]])}if(a.value.city==""){b.push([gLang["City is required."]])}if(a.value.state==""){b.push([gLang["State is required."]])}if(a.value.zip==""){b.push([gLang["Zip is required."]])}if(a.value.country==""){b.push([gLang["Country is required."]])}return b.length<1?"success":b}};this.changed=false},setValue:function(b){var a=this;if(b===null||b===""){b={addressline1:"",city:"",state:"",zip:""}}if(this.options.emptyValue){if(b.addressLine1!=this.options.emptyValue.addressLine1){a.component.find(":input[id*=addressLine1]").removeClass("defaultValue").val(b.addressLine1).blur()}if(b.addressLine2!=this.options.emptyValue.addressLine2){a.component.find(":input[id*=addressLine2]").removeClass("defaultValue").val(b.addressLine2).blur()}if(b.city!=this.options.emptyValue.city){a.component.find(":input[id*=city]").removeClass("defaultValue").val(b.city).blur()}if(b.state!=this.options.emptyValue.state||this.options.emptyValue.state==undefined){a.component.find(":input[id*=state]").removeClass("defaultValue").val(b.state).blur()}if(b.zip!=this.options.emptyValue.zip){a.component.find(":input[id*=zip]").removeClass("defaultValue").val(b.zip).blur()}}else{a.component.find(":input[id*=addressLine1]").val(b.addressLine1);a.component.find(":input[id*=addressLine2]").val(b.addressLine2);a.component.find(":input[id*=city]").val(b.city);a.component.find(":input[id*=state]").val(b.state);a.component.find(":input[id*=zip]").val(b.zip)}a.component.find(":input[id*=country]").val(b.country);this.validate(true)},getValue:function(){if(this.disabledByDependency||this.parentJFormSection.disabledByDependency){return null}var a={},b=this;a.addressLine1=b.component.find(":input[id*=addressLine1]").val();a.addressLine2=b.component.find(":input[id*=addressLine2]").val();a.city=b.component.find(":input[id*=city]").val();a.state=b.component.find(":input[id*=state]").val();a.zip=b.component.find(":input[id*=zip]").val();a.country=b.component.find(":input[id*=country]").val();this.component.find(":input").each(function(d,c){a[$(c).attr("id").replace(b.id+"-","")]=$(c).val()});if(this.options.emptyValue){if(a.addressLine1==this.options.emptyValue.addressLine1){a.addressLine1=""}if(a.addressLine2==this.options.emptyValue.addressLine2){a.addressLine2=""}if(a.city==this.options.emptyValue.city){a.city=""}if(a.state==this.options.emptyValue.state){a.state=""}if(a.zip==this.options.emptyValue.zip){a.zip=""}}return a},validate:function(){if(!this.parentJFormSection.parentJFormPage.jFormer.options.clientSideValidation){return}var a=this;if(!this.changed){this._super()}setTimeout(function(){if(!a.component.hasClass("jFormComponentHighlight")){if(a.options.validationOptions.length<1){return true}a.clearValidation();$.each(a.options.validationOptions,function(b,d){d.value=a.getValue();var c=a.validationFunctions[b](d);if(c=="success"){return}else{$.merge(a.errorMessageArray,c);a.validationPassed=false}});if(a.errorMessageArray.length>0){a.handleErrors()}a.changed=false;return a.validationPassed}},1)},addEmptyValues:function(){var b=this,a=this.options.emptyValue;$.each(a,function(d,e){var c=b.component.find("input[id*="+d+"]");c.addClass("defaultValue");c.focus(function(f){if($.trim($(f.target).val())==e){$(f.target).val("");$(f.target).removeClass("defaultValue")}});c.blur(function(f){if($.trim($(f.target).val())==""){$(f.target).addClass("defaultValue");$(f.target).val(e)}});c.trigger("blur")})}});JFormComponentCreditCard=JFormComponent.extend({init:function(d,c,b,a){this._super(d,c,b,a)},initialize:function(){this.tipTarget=this.component;if(this.options.emptyValues){this.addEmptyValues()}this.validationFunctions={required:function(a){var b=[];if(a.value.cardType!=undefined&&a.value.cardType==""){b.push([gLang["Card type is required."]])}if(a.value.cardNumber==""){b.push([gLang["Credit card number is required."]])}if(a.value.cardNumber!=""&&a.value.cardNumber.match(/[^\d]/)){b.push([gLang["Card number may only contain numbers."]])}if(a.value.cardNumber!=""&&(a.value.cardNumber.length<13||a.value.cardNumber.length>16)){b.push([gLang["Card number must contain 13 to 16 digits."]])}if(a.value.expirationMonth==""){b.push([gLang["Expiration month is required."]])}if(a.value.expirationYear==""){b.push([gLang["Expiration year is required."]])}if(a.value.securityCode!=undefined&&a.value.securityCode==""){b.push([gLang["Security code is required."]])}if(a.value.securityCode!=undefined&&a.value.securityCode!=""&&a.value.securityCode.match(/[^\d]/)){b.push([gLang["Security code may only contain numbers."]])}if(a.value.securityCode!=undefined&&a.value.securityCode!=""&&a.value.securityCode.length<3){b.push([gLang["Security code must contain 3 or 4 digits."]])}return b.length<1?"success":b}};this.changed=false},setValue:function(b){var a=this;if(this.options.emptyValues){if(b.cardType!=undefined){a.component.find(":input[id*=cardType]").removeClass("defaultValue").val(b.cardType).blur()}if(b.cardNumber!=this.options.emptyValues.cardNumber){a.component.find(":input[id*=cardNumber]").removeClass("defaultValue").val(b.cardNumber).blur()}a.component.find(":input[id*=expirationMonth]").removeClass("defaultValue").val(b.expirationMonth).blur();a.component.find(":input[id*=expirationYear]").removeClass("defaultValue").val(b.expirationYear).blur();if(b.securityCode!=undefined&&b.securityCode!=this.options.emptyValues.securityCode){a.component.find(":input[id*=expirationMonth]").removeClass("defaultValue").val(b.expirationMonth).blur()}}else{if(b.cardType!=undefined){a.component.find(":input[id*=cardType]").val(b.cardType)}a.component.find(":input[id*=cardNumber]").val(b.cardNumber);a.component.find(":input[id*=expirationMonth]").val(b.expirationMonth);a.component.find(":input[id*=expirationYear]").val(b.expirationYear);if(b.securityCode!=undefined){a.component.find(":input[id*=securityCode]").val(b.securityCode)}}this.validate(true)},getValue:function(){if(this.disabledByDependency||this.parentJFormSection.disabledByDependency){return null}var a={};if(this.component.find(":input[id*=cardType]").length!=0){a.cardType=this.component.find(":input[id*=cardType]").val()}a.cardNumber=this.component.find(":input[id*=cardNumber]").val();a.expirationMonth=this.component.find(":input[id*=expirationMonth]").val();a.expirationYear=this.component.find(":input[id*=expirationYear]").val();if(this.component.find(":input[id*=securityCode]").length!=0){a.securityCode=this.component.find(":input[id*=securityCode]").val()}if(this.options.emptyValues){if(a.cardNumber==this.options.emptyValues.cardNumber){a.cardNumber=""}if(a.securityCode!=undefined&&a.securityCode==this.options.emptyValues.securityCode){a.securityCode=""}}return a},validate:function(){if(!this.parentJFormSection.parentJFormPage.jFormer.options.clientSideValidation){return}var a=this;if(!this.changed){this._super()}setTimeout(function(){if(!a.component.hasClass("jFormComponentHighlight")){if(a.options.validationOptions.length<1){return true}a.clearValidation();$.each(a.options.validationOptions,function(b,d){d.value=a.getValue();var c=a.validationFunctions[b](d);if(c=="success"){return}else{$.merge(a.errorMessageArray,c);a.validationPassed=false}});if(a.errorMessageArray.length>0){a.handleErrors()}a.changed=false;return a.validationPassed}},1)},addEmptyValues:function(){var a=this,b=this.options.emptyValues;$.each(b,function(d,e){var c=a.component.find("input[id*="+d+"]");c.addClass("defaultValue");c.focus(function(f){if($.trim($(f.target).val())==e){$(f.target).val("");$(f.target).removeClass("defaultValue")}});c.blur(function(f){if($.trim($(f.target).val())==""){$(f.target).addClass("defaultValue");$(f.target).val(e)}});c.trigger("blur")})}});JFormComponentDate=JFormComponent.extend({init:function(d,c,b,a){this._super(d,c,b,a)},initialize:function(){var a=this;this.monthArray=["January","February","March","April","May","June","July","August","September","October","November","December"];this.addCalendar();this.tipTarget=this.component.find(".jFormComponentDateSelector");if(this.tipTarget==undefined){this.tipTarget=this.component}if(this.options.validationOptions.length==0){this.reformValidations()}this.validationFunctions={required:function(c){var g=[];if(c.value.month==""||c.value.day==""||c.value.year==""||c.value==null){g.push(gLang.requis);return g}var f=parseInt(c.value.month);var b=parseInt(c.value.day);var d=c.value.year;var e=false;if(!d.match(/[\d]{4}/)){g.push(gLang["You must enter a valid year."])}if(f<1||f>12){g.push(gLang["You must enter a valid month."])}if(f==4||f==6||f==9||f==11){if(b>30){e=true}}else{if(f==2){d=parseInt(d);var h=((d%4==0)&&((!(d%100==0))||(d%400==0)))?29:28;if(b>h){e=true}}}if(b>31||b<1){e=true}if(e){g.push(gLang["You must enter a valid day."])}return g.length<1?"success":g},minDate:function(b){var e=[];var d=a.getDateFromString(b.minDate);var c=a.getDateFromObject(b.value);if(c<d){e.push(gLang["Date must be on or after "]+a.monthArray[d.getMonth()]+" "+d.getDate()+", "+d.getFullYear()+".")}return e.length<1?"success":e},maxDate:function(b){var e=[];var d=a.getDateFromString(b.maxDate);var c=a.getDateFromObject(b.value);if(c>d){e.push(gLang["Date must be on or before "]+a.monthArray[d.getMonth()]+" "+d.getDate()+", "+d.getFullYear()+".")}return e.length<1?"success":e},teenager:function(e){var g="You must be at least 13 years old to use this site.",f=new Date(e.value.year,e.value.month,e.value.day),d=new Date(),b=new Date(d.getFullYear()-13,d.getMonth(),d.getDate()),c=(b-f);return e.value==""||c>=0?"success":g}}},highlight:function(){var a=this;this.component.addClass("jFormComponentHighlight").trigger("jFormComponent:highlighted",this.component);setTimeout(function(){a.component.trigger("jFormComponent:showTip",a.component)},1)},addCalendar:function(){var a=this.component.find("input:text");var b=a.date_input();a.bind("keyup",function(c){if(c.keyCode==9||c.keyCode==27||c.keyCode==13||c.keyCode==33||c.keyCode==34||c.keyCode==38||c.keyCode==40||c.keyCode==37||c.keyCode==39){return}else{if(a.val().length==10){a.trigger("change")}}})},getValue:function(){if(this.disabledByDependency||this.parentJFormSection.disabledByDependency){return null}var a={month:"",day:"",year:""};var b=$("#"+this.id).val();if(b!=""){b=b.split(b.match(/[^\d]/));if(b[0]!=undefined){a.month=b[0]}if(b[1]!=undefined){a.day=b[1]}if(b[2]!=undefined){a.year=b[2]}}return a},getDateFromString:function(a){var b=a.split("-");return new Date(parseInt(b[0],10),parseInt(b[1],10)-1,parseInt(b[2],10))},getDateFromObject:function(a){return new Date(parseInt(a.year,10),parseInt(a.month,10)-1,parseInt(a.day,10))},setValue:function(b){if(b==null||b.month=="undefined"||b.year=="undefined"||b.day=="undefined"){$("#"+this.id).val("");return}else{$("#"+this.id).val(a(b.month)+"/"+a(b.day)+"/"+b.year);if($("#"+this.id).val()=="//"){$("#"+this.id).val("")}}this.validate(true);return;function a(c){if(c==""||c=="undefined"){return""}c=""+c;if(c.length==1){c="0"+c}return c}}});JFormComponentDropDown=JFormComponent.extend({init:function(d,c,b,a){this._super(d,c,b,a)},initialize:function(){this.tipTarget=this.component.find("select:last")},getValue:function(){if(this.disabledByDependency||this.parentJFormSection.disabledByDependency){return null}var a=$("#"+this.id).val();return a},setValue:function(a){$("#"+this.id).val(a).trigger("jFormComponent:changed");this.validate(true)}});JFormComponentFile=JFormComponent.extend({init:function(d,c,b,a){this._super(d,c,b,a)},initialize:function(){var a=this.component.find("button").parent();if(a.length<1){a=this.component.find("input:file")}this.tipTarget=a;if(this.options.customStyle){this.setOnChange()}this.validationFunctions={required:function(b){var c=[gLang.requis];return b.value!=""?"success":c},extension:function(b){var d=["Must have the ."+b.extension+" extension."];var c=new RegExp("\\."+b.extension+"$","i");return b.value==""||b.value.match(c)?"success":d},extensionType:function(b){var d;var e=[gLang["Incorrect file type."]];if($.isArray(b.extensionType)){d=new RegExp("\\.("+b.extensionType.join("|")+")$","i")}else{var c={};c.image=/\.(bmp|gif|jpe?g|png|psd|psp|thm|tif)/i;c.document=/\.(doc|docx|log|msg|pages|rtf|txt|wpd|wps)/i;c.audio=/\.(aac|aif|iff|m3u|mid|midi|mp3|mpa|ra|wav|wma)/i;c.video=/\.(3g2|3gp|asf|asx|avi|flv|mov|mp4|mpg|rm|swf|vob|wmv)/i;c.web=/\.(asp|css|htm|html|js|jsp|php|rss|xhtml)/i;d=new RegExp(c[b.extensionType]);e=["Must be an "+b.extensionType+" file type."]}return b.value==""||b.value.match(d)?"success":e},size:function(b){return true},imageDimensions:function(b){return true},minImageDimensions:function(b){return true}}},setOnChange:function(){var a=this;this.component.find("input:file").change(function(b){var c=b.target.value.replace(/.+\\/,"");a.component.find("input:text").val(c)})},setValue:function(){return false},getValue:function(){if(this.disabledByDependency||this.parentJFormSection.disabledByDependency){return null}return this.component.find("input:file").val()},validate:function(){this._super()}});JFormComponentHidden=JFormComponent.extend({init:function(d,c,b,a){this._super(d,c,b,a)},getValue:function(){if(this.disabledByDependency||this.parentJFormSection.disabledByDependency){return null}return $("#"+this.id).val()},validate:function(){this._super()}});JFormComponentLikert=JFormComponent.extend({init:function(d,c,b,a){this._super(d,c,b,a)},initialize:function(){var a=this;this.changed=false;this.tipTarget=this.component;this.statementComponentArray={};$.each(this.options.statementArray,function(b,d){if(!jFormerUtility.empty(a.options.validationOptions)){d.validationOptions=a.options.validationOptions}var c=new JFormComponentLikertStatement(a.parentJFormSection,b,"JFormComponentLikertStatement",d);c.id=a.id+"-"+c.id;a.parentJFormSection.addComponent(c);a.statementComponentArray[b]=c})},clearValidation:function(){$.each(this.statementComponentArray,function(a,b){b.clearValidation()})},setValue:function(b){var a=this;return},catchComponentChangedEventListener:function(){return null},addHighlightListeners:function(){return null},defineComponentChangedEventListener:function(){return null},addTipListeners:function(){return null},getValue:function(){var a={};$.each(this.statementComponentArray,function(c,b){a[c]=b.getValue()});return a},handleErrors:function(){var a=this;return true},handleServerValidationResponse:function(b){var a=this;if(b.length>0){$.each(this.instanceArray,function(d,c){$.each(b,function(e,f){$.each(f,function(h,j){var g=a.parentJFormSection.jFormComponents[c.id+"-"+h];if(g!=undefined){g.errorMessageArray=[j];g.validationPassed=false;g.handleErrors()}})})})}},validate:function(){var a=this;return true}});JFormComponentLikertStatement=JFormComponent.extend({init:function(d,c,b,a){this._super(d,c,b,a)},initialize:function(){var a=this;this.changed=false;this.component=$("input[name="+this.id+"]:first").closest("tr");this.tipTarget=this.component;this.tipDiv=this.component.find("div.jFormComponentLikertStatementTip");this.validationFunctions={required:function(b){var c=[gLang.requis];return b.value.length>0?"success":c}}},setValue:function(b){var a=this;a.component.find("input").val([b]);this.validate(true)},validate:function(){this._super()},getValue:function(){if(this.disabledByDependency||this.parentJFormSection.disabledByDependency){return null}var a=this.component.find("input:checked");if(a.length>0){a=a.val()}else{a=""}return a}});JFormComponentMultipleChoice=JFormComponent.extend({init:function(d,c,b,a){this._super(d,c,b,a)},initialize:function(){this.tipTarget=this.component;this.addChoiceTips();this.validationFunctions={required:function(a){var b=[gLang.requis];return a.value.length>0?"success":b},minOptions:function(a){var b=["You must select more than "+a.minOptions+" options"];return a.value.length==0||a.value.length>a.minOptions?"success":b},maxOptions:function(a){var b=["You may select up to "+a.maxOptions+" options. You have selected "+a.value.length+"."];return a.value.length==0||a.value.length<=a.maxOptions?"success":b}}},addChoiceTips:function(){var b=this;var a=this.component.find("div.jFormComponentMultipleChoiceTip");if(a.length>0){a.each(function(c,e){var d=$(e).prev("label").find(".jFormComponentMultipleChoiceTipIcon");if(d.length==0){d=$(e).parent()}d.simpletip({position:"topRight",content:$(e),baseClass:"jFormerTip jFormComponentMultipleChoiceTip",hideEffect:"none"})})}},getValue:function(){if(this.disabledByDependency||this.parentJFormSection.disabledByDependency){return null}var a;if(this.options.multipleChoiceType=="checkbox"){a=[];this.component.find("input:checked").each(function(c,b){a.push($(b).val())})}else{if(this.component.find("input:checked").length>0){a=this.component.find("input:checked").val()}else{a=""}}return a},setValue:function(b){var a=this;if(this.options.multipleChoiceType=="checkbox"){$.each(b,function(c,d){a.component.find("input[value='"+d+"']").attr("checked","checked").trigger("jFormComponent:changed")})}else{this.component.find("input[value='"+b+"']").attr("checked","checked").trigger("jFormComponent:changed");if(b==null){this.component.find("input").attr("checked",false).trigger("jFormComponent:changed")}}this.validate(true)}});JFormComponentName=JFormComponent.extend({init:function(d,c,b,a){this._super(d,c,b,a)},initialize:function(){this.tipTarget=this.component.find("input:last");if(this.options.emptyValue){this.addEmptyValues()}this.changed=false;this.validationFunctions={required:function(a){var b=[];if(a.value.firstName==""){b.push([gLang.first_name])}if(a.value.lastName==""){b.push([gLang.last_name])}return b.length<1?"success":b}}},setValue:function(b){var a=this;if(this.options.emptyValue){if(b.firstName!=a.options.emptyValue.firstName){a.component.find("input[id*=firstName]").removeClass("defaultValue").val(b.firstName).blur()}a.component.find("input[id*=middleInitial]").removeClass("defaultValue").val(b.middleInitial).blur();if(b.lastName!=a.options.emptyValue.lastName){a.component.find("input[id*=lastName]").removeClass("defaultValue").val(b.lastName).blur()}}else{a.component.find("input[id*=firstName]").val(b.firstName);a.component.find("input[id*=middleInitial]").val(b.middleInitial);a.component.find("input[id*=lastName]").val(b.lastName)}this.validate(true)},getValue:function(){if(this.disabledByDependency||this.parentJFormSection.disabledByDependency){return null}var b={},a=this;b.firstName=this.component.find("input[id*=firstName]").val();b.middleInitial=this.component.find("input[id*=middleInitial]").val();b.lastName=this.component.find("input[id*=lastName]").val();if(this.options.emptyValue){if(b.firstName==this.options.emptyValue.firstName){b.firstName=""}if(this.component.find("input[id$=middleInitial]").hasClass("defaultValue")){b.middleInitial=""}if(b.lastName==this.options.emptyValue.lastName){b.lastName=""}}return b},validate:function(){if(!this.parentJFormSection.parentJFormPage.jFormer.options.clientSideValidation){return}var a=this;if(!this.changed){this._super()}setTimeout(function(){if(!a.component.hasClass("jFormComponentHighlight")){if(a.options.validationOptions.length<1){return true}a.clearValidation();$.each(a.options.validationOptions,function(b,d){d.value=a.getValue();var c=a.validationFunctions[b](d);if(c=="success"){return}else{$.merge(a.errorMessageArray,c);a.validationPassed=false}});if(a.errorMessageArray.length>0){a.handleErrors()}a.changed=false;return a.validationPassed}},1)},addEmptyValues:function(){var b=this,a=this.options.emptyValue;$.each(a,function(d,e){var c=b.component.find("input[id*="+d+"]");c.addClass("defaultValue");c.focus(function(f){if($.trim($(f.target).val())==e){$(f.target).val("");$(f.target).removeClass("defaultValue")}});c.blur(function(f){if($.trim($(f.target).val())==""){$(f.target).addClass("defaultValue");$(f.target).val(e)}});c.trigger("blur")})}});JFormComponentSingleLineText=JFormComponent.extend({init:function(d,c,b,a){this._super(d,c,b,a)},initialize:function(){this.tipTarget=this.component.find("input:last");this.enterSubmits=false;if(this.options.mask){this.addMask()}if(this.options.emptyValue){this.addEmptyValue()}if(this.component.find("input:password").length==1&&this.options.showStrength){this.addPasswordStrength()}this.validationFunctions={alpha:function(a){var b=[gLang.alpha];return a.value==""||a.value.match(/^[A-Za-z]+$/i)?"success":b},alphaDecimal:function(a){var b=[gLang["Must only contain letters, numbers, or periods."]];return a.value==""||a.value.match(/^[A-Za-z0-9\.]+$/i)?"success":b},alphaNumeric:function(a){var b=[gLang["Must only contain letters or numbers."]];return a.value==""||a.value.match(/^[A-Za-z0-9]+$/i)?"success":b},blank:function(a){var b=[gLang["Must be blank."]];return $.trim(a.value).length==0?"success":b},canadianPostal:function(a){var b=[gLang["Must be a valid Canadian postal code."]];return a.value==""||a.value.match(/^[ABCEGHJKLMNPRSTVXY][0-9][A-Z] [0-9][A-Z][0-9]$/)?"success":b},date:function(a){var b=[gLang["Must be a date in the mm/dd/yyyy format."]];return a.value==""||a.value.match(/^(0?[1-9]|1[012])[\- \/.](0?[1-9]|[12][0-9]|3[01])[\- \/.](19|20)[0-9]{2}$/)?"success":b},dateTime:function(a){var b=[gLang["Must be a date in the mm/dd/yyyy hh:mm:ss tt format. ss and tt are optional."]];return a.value==""||a.value.match(/^(0?[1-9]|1[012])[\- \/.](0?[1-9]|[12][0-9]|3[01])[\- \/.](19|20)?[0-9]{2} [0-2]?\d:[0-5]\d(:[0-5]\d)?( ?(a|p)m)?$/i)?"success":b},decimal:function(a){var b=[gLang["Must be a number without any commas. Decimal is optional."]];return a.value==""||a.value.match(/^-?((\d+(\.\d+)?)|(\.\d+))$/)?"success":b},decimalNegative:function(a){var c=[gLang["Must be a negative number without any commas. Decimal is optional."]];var b=this.decimal(a);return a.value==""||(b=="success"&&(parseFloat(a.value)<0))?"success":c},decimalPositive:function(a){var c=[gLang["Must be a positive number without any commas. Decimal is optional."]];var b=this.decimal(a);return a.value==""||(b=="success"&&(parseFloat(a.value)>0))?"success":c},decimalZeroNegative:function(a){var c=[gLang["Must be zero or a negative number without any commas. Decimal is optional."]];var b=self.validations.decimal({value:a.value});return a.value==""||(b=="success"&&(parseFloat(a.value)<=0))?"success":c},decimalZeroPositive:function(a){var c=[gLang["Must be zero or a positive number without any commas. Decimal is optional."]];var b=this.decimal(a);return a.value==""||(b=="success"&&(parseFloat(a.value)>=0))?"success":c},email:function(a){var b=[gLang["Must be a valid e-mail address."]];return a.value==""||a.value.match(/^[A-Z0-9._%\-\+]+@(?:[A-Z0-9\-]+\.)+[A-Z]{2,4}$/i)?"success":b},integer:function(a){var b=[gLang["Must be a whole number."]];return a.value==""||a.value.match(/^-?\d+$/)?"success":b},integerNegative:function(a){var c=[gLang["Must be a negative whole number."]];var b=this.integer(a);return a.value==""||(b=="success"&&(parseInt(a.value,10)<0))?"success":c},integerPositive:function(a){var c=[gLang["Must be a positive whole number."]];var b=this.integer(a);return a.value==""||(b=="success"&&(parseInt(a.value,10)>0))?"success":c},integerZeroNegative:function(a){var c=[gLang["Must be zero or a negative whole number."]];var b=this.integer(a);return a.value==""||(b=="success"&&(parseInt(a.value,10)<=0))?"success":c},integerZeroPositive:function(a){var c=[gLang["Must be zero or a positive whole number."]];var b=this.integer(a);return a.value==""||(b=="success"&&(parseInt(a.value,10)>=0))?"success":c},isbn:function(a){var b=[gLang["Must be a valid ISBN and consist of either ten or thirteen characters."]];if(a.value.match(/^(?=.{13}$)\d{1,5}([\- ])\d{1,7}\1\d{1,6}\1(\d|X)$/)){b="sucess"}if(a.value.match(/^\d{9}(\d|X)$/)){b="sucess"}if(a.value.match(/^(?=.{17}$)\d{3}([\- ])\d{1,5}\1\d{1,7}\1\d{1,6}\1(\d|X)$/)){b="sucess"}if(a.value.match(/^\d{3}[\- ]\d{9}(\d|X)$/)){b="sucess"}if(a.value.match(/^\d{12}(\d|X)$/)){b="sucess"}return b},length:function(a){var b=["Must be exactly "+a.length+" characters long. Current value is "+a.value.length+" characters."];return a.value==""||a.value.length==a.length?"success":b},matches:function(a){var d=[gLang.match];var c=a.matches;if(a.sectionInstances){var b=a.component.attr("id").match(/-section[\d]+/);if(b){c=a.matches+b}}return a.value==$("#"+c).val()?"success":d},maxLength:function(a){var b=["Must be less than "+a.maxLength+" characters long. Current value is "+a.value.length+" characters."];return a.value==""||a.value.length<=a.maxLength?"success":b},maxFloat:function(b){var c="Must be numeric and cannot have more than "+b.maxFloat+" decimal place(s).",a=new RegExp("^-?((\\d+(\\.\\d{0,"+b.maxFloat+"})?)|(\\.\\d{0,"+b+"}))$");return b.value==""||b.value.match(a)?"success":c},maxValue:function(a){var b=["Must be numeric with a maximum value of "+a.maxValue+"."];return(a.value<=a.maxValue)?"success":b},minLength:function(a){var b=["Must be at least "+a.minLength+" characters long. Current value is "+a.value.length+" characters."];return a.value==""||a.value.length>=a.minLength?"success":b},minValue:function(a){var b=["Must be numeric with a minimum value of "+a.minValue+"."];return(a.value>=a.minValue)?"success":b},money:function(a){var b=[gLang["Must be a valid dollar value."]];return a.value==""||a.value.match(/^\$?[1-9][0-9]{0,2}(,?[0-9]{3})*(\.[0-9]{2})?$/)?"success":b},moneyNegative:function(a){var b=[gLang["Must be a valid negative dollar value."]];return a.value==""||a.value.match(/^((-?\$)|(\$-?)|(-))?((\d+(\.\d{2})?)|(\.\d{2}))$/)&&RegExp.$5<0?"success":b},moneyPositive:function(a){var b=[gLang["Must be a valid positive dollar value."]];return a.value==""||a.value.match(/^((-?\$)|(\$-?)|(-))?((\d+(\.\d{2})?)|(\.\d{2}))$/)&&RegExp.$5>0?"success":b},moneyZeroNegative:function(a){var b=[gLang["Must be zero or a valid negative dollar value."]];return a.value==""||a.value.match(/^((-?\$)|(\$-?)|(-))?((\d+(\.\d{2})?)|(\.\d{2}))$/)&&RegExp.$5<=0?"success":b},moneyZeroPositive:function(a){var b=[gLang["Must be zero or a valid positive dollar value."]];return a.value==""||a.value.match(/^((-?\$)|(\$-?)|(-))?((\d+(\.\d{2})?)|(\.\d{2}))$/)&&RegExp.$5>=0?"success":b},password:function(a){var b=[gLang["Must be between 4 and 32 characters."]];return a.value==""||a.value.match(/(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,32}/)?"success":b},phone:function(a){var b=[gLang["Must be a 10 digit phone number."]];return a.value==""||a.value.match(/^(1[\-. ]?)?\(?[0-9]{3}\)?[\-. ]?[0-9]{3}[\-. ]?[0-9]{4}$/)?"success":b},postalZip:function(a){var b=[gLang["Must be a valid United States zip code, Canadian postal code, or United Kingdom postal code."]];return a.value==""||this.zip(a)=="success"||this.canadianPostal(a)=="success"||this.ukPostal()=="success"?"success":b},required:function(a){var b=[gLang.requis];return a.value!=""?"success":b},serverSide:function(a){if(a.value==""){return"success"}var b=[];a.component.addClass("jFormComponentServerSideCheck");$.ajax({url:a.url,type:"post",data:{task:a.task,value:a.value},dataType:"json",cache:false,async:false,success:function(c){if(c.status!="success"){b=c.response}a.component.removeClass("jFormComponentServerSideCheck")},error:function(c,e,d){if(e!="error"){d=e?e:"Unknown error"}b=[gLang["There was an error during server side validation: "]+d];a.component.removeClass("jFormComponentServerSideCheck")}});return b.length<1?"success":b},ssn:function(a){var b=["Must be a valid United States social security number."];return a.value==""||a.value.match(/^\d{3}-?\d{2}-?\d{4}$/i)?"success":b},teenager:function(d){var f="Must be at least 13 years old.",e=new Date(d.value),c=new Date(),a=new Date(c.getFullYear()-13,c.getMonth(),c.getDate()),b=(a-e);return d.value==""||b>=0?"success":f},time:function(a){var b=["Must be a time in the hh:mm:ss tt format. ss and tt are optional."];return a.value==""||a.value.match(/^[0-2]?\d:[0-5]\d(:[0-5]\d)?( ?(a|p)m)?$/i)?"success":b},ukPostal:function(a){var b=["Must be a valid United Kingdom postal code."];return a.value==""||a.value.match(/^[A-Z]{1,2}[0-9][A-Z0-9]? [0-9][ABD-HJLNP-UW-Z]{2}$/)?"success":b},url:function(a){var b=[gLang["Must be a valid Internet address."]];return a.value==""||a.value.match(/^((ht|f)tp(s)?:\/\/|www\.)?([\-A-Z0-9.]+)(\.[a-zA-Z]{2,4})(\/[\-A-Z0-9+&@#\/%=~_|!:,.;]*)?(\?[\-A-Z0-9+&@#\/%=~_|!:,.;]*)?$/i)?"success":b},username:function(a){var b=[gLang["Must use 4 to 32 characters and start with a letter."]];return a.value==""||a.value.match(/^[A-Za-z](?=[A-Za-z0-9_.]{3,31}$)[a-zA-Z0-9_]*\.?[a-zA-Z0-9_]*$/)?"success":b},zip:function(a){var b=["Must be a valid United States zip code."];return a.value==""||a.value.match(/^[0-9]{5}(?:-[0-9]{4})?$/)?"success":b}}},addMask:function(){this.component.find("input").mask("?"+this.options.mask,{placeholder:" "})},addPasswordStrength:function(){var a=this,b=this.component;var c="<p id='"+this.id+"-strength' > Strength: <b> "+this.getPasswordStrength().strength+" </b> </p>";b.find("div.jFormComponentTip").append(c);b.find("input:password").bind("keyup",function(d){b.find("#"+a.id+"-strength b").text(a.getPasswordStrength().strength);a.tip.update(b.find("div.jFormComponentTip").html())})},getPasswordStrength:function(){var a=this.getValue(),c=0,b="None";if(a.length>=6){c=(c+1)}if(a.length>=10){c=(c+1)}if(a.match(/[a-z]/)){c=(c+1)}if(a.match(/[A-Z]/)){c=(c+1)}if(a.match(/\d+/)){c=(c+1)}if(a.match(/(\d.*\d)/)){c=(c+1)}if(a.match(/[!,@#$%\^&*?_~]/)){c=(c+1)}if(a.match(/([!,@#$%\^&*?_~].*[!,@#$%\^&*?_~])/)){c=(c+1)}if(a.match(/[a-z]/)&&a.match(/[A-Z]/)){c=(c+1)}if(a.match(/\d/)&&a.match(/\D/)){c=(c+1)}if(a.match(/[a-z]/)&&a.match(/[A-Z]/)&&a.match(/\d/)&&a.match(/[!,@#$%\^&*?_~]/)){c=(c+1)}if(c===0){b="None"}else{if(c<=1){b="Very Weak"}else{if(c<=3){b="Weak"}else{if(c<=5){b="Good"}else{if(c<=7){b="Strong"}else{if(c>7){b="Very Strong"}}}}}}return{score:c,strength:b}},getValue:function(){if(this.disabledByDependency||this.parentJFormSection.disabledByDependency){return null}var a=$("#"+this.id).val();if(this.options.emptyValue){if(a==this.options.emptyValue){return""}else{return a}}else{return a}},setValue:function(a){$("#"+this.id).val(a).removeClass("defaultValue");this.validate(true)},addEmptyValue:function(){var a=this.options.emptyValue,b=this.component.find("input");b.addClass("defaultValue");b.val(a);var c="";b.focus(function(d){c=$(d.target);if($.trim(c.val())==a){c.val("");c.removeClass("defaultValue")}});b.blur(function(d){c=$(d.target);if($.trim(c.val())==""){c.addClass("defaultValue");c.val(a)}})}});JFormComponentTextArea=JFormComponent.extend({init:function(d,c,b,a){this._super(d,c,b,a);if(this.options.allowTabbing){this.allowTabbing()}if(this.options.emptyValue){this.addEmptyValue()}if(this.options.autoGrow){this.addAutoGrow()}},initialize:function(){this.tipTarget=this.component.find("textarea");if(this.options.emptyValue){this.addEmptyValue()}},allowTabbing:function(){this.component.find("textarea").bind("keydown",function(c){if(c!=null){if(c.keyCode==9){if(this.setSelectionRange){var a=this.selectionStart;var b=this.selectionEnd;this.value=this.value.substring(0,a)+"\t"+this.value.substr(b);this.setSelectionRange(a+1,a+1);this.focus()}else{if(this.createTextRange){document.selection.createRange().text="\t";c.returnValue=false}}if(c.preventDefault){c.preventDefault()}return false}}})},addEmptyValue:function(){var a=this.options.emptyValue,c=this.component.find("textarea");c.addClass("defaultValue");c.val(a);var b="";c.focus(function(d){b=$(d.target);if($.trim(b.val())==a){b.val("");b.removeClass("defaultValue")}});c.blur(function(d){b=$(d.target);if($.trim(b.val())==""){b.addClass("defaultValue");b.val(a)}})},addAutoGrow:function(){var a=this,d=this.component.find("textarea"),c=d.height(),b=d.css("lineHeight");var f=$("<div></div>").css({position:"absolute",top:-10000,left:-10000,width:d.width()-parseInt(d.css("paddingLeft"))-parseInt(d.css("paddingRight")),fontSize:d.css("fontSize"),fontFamily:d.css("fontFamily"),lineHeight:d.css("lineHeight"),resize:"none"}).appendTo(document.body);var e=function(){var h=function(j,m){for(var k=0,l="";k<m;k++){l+=j}return l};var g=d.val().replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&/g,"&amp;").replace(/\n$/,"<br/>&nbsp;").replace(/\n/g,"<br/>").replace(/ {2,}/g,function(j){return h("&nbsp;",j.length-1)+" "});f.html(g);d.css("height",Math.max(f.height()+20,c));if(a.parentJFormSection.parentJFormPage.jFormer.currentJFormPage){a.parentJFormSection.parentJFormPage.jFormer.adjustHeight({delay:0})}};$(d).change(e).keyup(e).keydown(e);e.apply(d);return this},getValue:function(){if(this.disabledByDependency||this.parentJFormSection.disabledByDependency){return null}var a=$("#"+this.id).val();if(this.options.emptyValue){if(a==this.options.emptyValue){return""}else{return a}}else{return a}},setValue:function(a){$("#"+this.id).val(a);this.validate(true)}});